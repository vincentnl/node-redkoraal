[
    {
        "id": "b01a2cb9.9baef",
        "type": "tab",
        "label": "VvdkStatus",
        "disabled": false,
        "info": ""
    },
    {
        "id": "1f8a59d.c5c0ca6",
        "type": "tab",
        "label": "Temperature",
        "disabled": false,
        "info": ""
    },
    {
        "id": "f8c3d2e.ff7853",
        "type": "tab",
        "label": "Logging",
        "disabled": false,
        "info": ""
    },
    {
        "id": "aaabbee3.5276e",
        "type": "tab",
        "label": "Weight",
        "disabled": false,
        "info": ""
    },
    {
        "id": "c13cf3fe.71f31",
        "type": "tab",
        "label": "Alarm",
        "disabled": false,
        "info": ""
    },
    {
        "id": "375d1e4f.6a9d22",
        "type": "tab",
        "label": "Devices Net",
        "disabled": false,
        "info": ""
    },
    {
        "id": "aa9f90ed.25077",
        "type": "tab",
        "label": "Badkamer WC Slaapkamer",
        "disabled": false,
        "info": ""
    },
    {
        "id": "922b9d9f.0323",
        "type": "tab",
        "label": "Keuken - Kamer - Terras",
        "disabled": false,
        "info": ""
    },
    {
        "id": "3aed527a.e169fe",
        "type": "tab",
        "label": "Weather",
        "disabled": false,
        "info": ""
    },
    {
        "id": "f4f34383.c51b7",
        "type": "tab",
        "label": "Test",
        "disabled": false,
        "info": ""
    },
    {
        "id": "78477e05.07c09",
        "type": "subflow",
        "name": "Parse Parts",
        "info": "",
        "in": [
            {
                "x": 100,
                "y": 140,
                "wires": [
                    {
                        "id": "2bae136a.4ae26c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 400,
                "y": 140,
                "wires": [
                    {
                        "id": "2bae136a.4ae26c",
                        "port": 0
                    }
                ]
            }
        ]
    },
    {
        "id": "1f30ecc.3cf9813",
        "type": "subflow",
        "name": "RFSetColor",
        "info": "",
        "in": [
            {
                "x": 140,
                "y": 360,
                "wires": []
            }
        ],
        "out": [
            {
                "x": 720,
                "y": 360,
                "wires": []
            }
        ]
    },
    {
        "id": "a8c1ffd8.16e1",
        "type": "subflow",
        "name": "RfLink",
        "info": "",
        "in": [
            {
                "x": 180,
                "y": 280,
                "wires": []
            }
        ],
        "out": [
            {
                "x": 1160,
                "y": 380,
                "wires": []
            }
        ]
    },
    {
        "id": "cc35ed80.8e43c",
        "type": "subflow",
        "name": "RF ON",
        "info": "",
        "in": [
            {
                "x": 140,
                "y": 320,
                "wires": []
            }
        ],
        "out": [
            {
                "x": 400,
                "y": 320,
                "wires": []
            }
        ]
    },
    {
        "id": "f8f656ed.e6b658",
        "type": "subflow",
        "name": "Uppercase",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": []
            }
        ],
        "out": [
            {
                "x": 360,
                "y": 100,
                "wires": []
            }
        ]
    },
    {
        "id": "68815de1.ca2394",
        "type": "subflow",
        "name": "true/false",
        "info": "",
        "in": [
            {
                "x": 160,
                "y": 220,
                "wires": []
            }
        ],
        "out": [
            {
                "x": 900,
                "y": 340,
                "wires": []
            },
            {
                "x": 900,
                "y": 460,
                "wires": []
            }
        ]
    },
    {
        "id": "acc34840.af99d8",
        "type": "subflow",
        "name": "Inverse",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "3ad5bc7c.222344"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 680,
                "y": 220,
                "wires": [
                    {
                        "id": "4047021b.5c8dac",
                        "port": 0
                    },
                    {
                        "id": "e282c203.9f886",
                        "port": 0
                    },
                    {
                        "id": "dc0500f1.e0c65",
                        "port": 0
                    },
                    {
                        "id": "11f5ef76.47aac1",
                        "port": 0
                    },
                    {
                        "id": "9dc653a4.ae4e2",
                        "port": 0
                    },
                    {
                        "id": "743c7826.444bb8",
                        "port": 0
                    },
                    {
                        "id": "f224f4f.15a9e08",
                        "port": 0
                    },
                    {
                        "id": "765e1859.8dd7c8",
                        "port": 0
                    },
                    {
                        "id": "b571e1ee.e4fbc",
                        "port": 0
                    },
                    {
                        "id": "155172dd.afa01d",
                        "port": 0
                    }
                ]
            }
        ]
    },
    {
        "id": "8a844107.6e076",
        "type": "subflow",
        "name": "On/Off",
        "info": "",
        "in": [
            {
                "x": 260,
                "y": 360,
                "wires": [
                    {
                        "id": "cba6ebde.e30c88"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 700,
                "y": 280,
                "wires": [
                    {
                        "id": "cba6ebde.e30c88",
                        "port": 0
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 0
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 1
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 2
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 3
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 4
                    }
                ]
            },
            {
                "x": 720,
                "y": 460,
                "wires": [
                    {
                        "id": "cba6ebde.e30c88",
                        "port": 1
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 5
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 6
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 7
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 8
                    },
                    {
                        "id": "a93b3c4.0f638c",
                        "port": 9
                    }
                ]
            }
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "35694a1c.27fc86",
        "type": "subflow",
        "name": "If Daylight",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 180,
                "wires": [
                    {
                        "id": "61c53188.53161"
                    },
                    {
                        "id": "c005a6ac.f6ebc8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 340,
                "y": 140,
                "wires": [
                    {
                        "id": "61c53188.53161",
                        "port": 0
                    }
                ]
            },
            {
                "x": 340,
                "y": 240,
                "wires": [
                    {
                        "id": "c005a6ac.f6ebc8",
                        "port": 0
                    }
                ]
            }
        ],
        "outputLabels": [
            "Day",
            "Night"
        ],
        "icon": "node-red-node-suncalc/sun.png"
    },
    {
        "id": "17a402a4.2bd49d",
        "type": "subflow",
        "name": "RF OFF",
        "info": "",
        "in": [
            {
                "x": 140,
                "y": 400,
                "wires": []
            }
        ],
        "out": [
            {
                "x": 400,
                "y": 400,
                "wires": []
            }
        ]
    },
    {
        "id": "851545fd.080be8",
        "type": "subflow",
        "name": "Message",
        "info": "Topic:\n    Topic of the message\n\nPayload:\n    Message\n\nAction: (Optional)\n    Category for choices",
        "category": "Notify",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "f874086d.554d28"
                    },
                    {
                        "id": "bc790893.3aaa08"
                    }
                ]
            }
        ],
        "out": []
    },
    {
        "id": "405d007b.0887d",
        "type": "subflow",
        "name": "If At Home",
        "info": "",
        "in": [
            {
                "x": 114.0000057220459,
                "y": 300.99996757507324,
                "wires": [
                    {
                        "id": "e45dc852.6e1a08"
                    },
                    {
                        "id": "6966cb4a.6cb754"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 470.00000190734863,
                "y": 264.9999647140503,
                "wires": [
                    {
                        "id": "e45dc852.6e1a08",
                        "port": 0
                    }
                ]
            },
            {
                "x": 475.00000190734863,
                "y": 329.9999656677246,
                "wires": [
                    {
                        "id": "6966cb4a.6cb754",
                        "port": 0
                    }
                ]
            }
        ],
        "outputLabels": [
            "At Home",
            "Not At Home"
        ]
    },
    {
        "id": "c255db5.4d13a28",
        "type": "subflow",
        "name": "Ios Notification Actions",
        "info": "",
        "category": "Notify",
        "in": [],
        "out": [
            {
                "x": 738.0000267028809,
                "y": 37.99999809265137,
                "wires": [
                    {
                        "id": "116f7c56.d9d764",
                        "port": 0
                    }
                ]
            },
            {
                "x": 743.0000267028809,
                "y": 105.99999618530273,
                "wires": [
                    {
                        "id": "116f7c56.d9d764",
                        "port": 1
                    }
                ]
            },
            {
                "x": 744.0000076293945,
                "y": 180.00000762939453,
                "wires": [
                    {
                        "id": "116f7c56.d9d764",
                        "port": 2
                    }
                ]
            }
        ],
        "outputLabels": [
            "Cancel temperature",
            "Sound alarm",
            "Cancel alarm"
        ],
        "icon": "node-red/bridge-dash.png"
    },
    {
        "id": "e247e4d8.86ae58",
        "type": "subflow",
        "name": "Google Say",
        "info": "",
        "category": "Notify",
        "in": [
            {
                "x": 126.00000381469727,
                "y": 118.00000190734863,
                "wires": [
                    {
                        "id": "636e5354.a67a6c"
                    }
                ]
            }
        ],
        "out": []
    },
    {
        "id": "bfd62bd3.8ae858",
        "type": "subflow",
        "name": "Ios topic",
        "info": "Topic:\n    Topic of the message\nPayload:\n    Message\nAction: (Optional)\n    Category for choices",
        "category": "Notify",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "27a5ebe1.345034"
                    }
                ]
            }
        ],
        "out": []
    },
    {
        "id": "fd7dbe32.1f2d2",
        "type": "subflow",
        "name": "Log",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "38f4a345.28b87c"
                    }
                ]
            }
        ],
        "out": []
    },
    {
        "id": "e33aa8df.806938",
        "type": "mqtt-broker",
        "z": "",
        "name": "Hivemq",
        "broker": "127.0.0.1",
        "port": "1883",
        "clientid": "node-red",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "f8bbaad3.3e5e08",
        "type": "configNode",
        "z": "",
        "client_id": "5932a36829977ec9298b5113",
        "client_secret": "NJ1fv1TXeo5UNvsXYaWEACA0idQ5M9QQkhH",
        "username": "vincent@vanderkruit.com",
        "password": "626gti",
        "device_id": "70:ee:50:03:c6:54"
    },
    {
        "id": "76eac5e0.de774c",
        "type": "MySQLdatabase",
        "z": "",
        "host": "127.0.0.1",
        "port": "3306",
        "db": "node-red",
        "tz": ""
    },
    {
        "id": "25524eee.76b162",
        "type": "ui_base",
        "z": "aaabbee3.5276e",
        "theme": {
            "themeState": {
                "page-titlebar-backgroundColor": {
                    "edited": false,
                    "value": "#0094CE"
                },
                "widget-textColor": {
                    "edited": false,
                    "value": "#111111"
                },
                "page-sidebar-backgroundColor": {
                    "edited": false,
                    "value": "#ffffff"
                },
                "widget-backgroundColor": {
                    "edited": false,
                    "value": "#0094ce"
                },
                "page-backgroundColor": {
                    "edited": false,
                    "value": "#fafafa"
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                },
                "group-borderColor": {
                    "edited": false,
                    "value": "#ffffff"
                },
                "widget-borderColor": {
                    "edited": false,
                    "value": "#ffffff"
                },
                "group-backgroundColor": {
                    "edited": false,
                    "value": "#ffffff"
                },
                "group-textColor": {
                    "edited": false,
                    "value": "#1bbfff"
                },
                "base-color": {
                    "edited": false,
                    "default": "#0094CE",
                    "value": "#0094CE"
                }
            },
            "darkTheme": {
                "baseColor": "#097479",
                "edited": false,
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "default": "#097479"
            },
            "lightTheme": {
                "baseColor": "#0094CE",
                "edited": true,
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "default": "#0094CE",
                "reset": false
            },
            "name": "theme-light",
            "customTheme": {
                "baseColor": "#4B7930",
                "default": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "name": "Untitled Theme 1"
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "py": 0,
                "sy": 48,
                "gy": 6,
                "px": 0,
                "sx": 48,
                "cx": 6,
                "gx": 6,
                "cy": 6
            },
            "name": "Node-RED Dashboard",
            "allowSwipe": "false",
            "allowTempTheme": "true",
            "hideToolbar": "false"
        }
    },
    {
        "id": "2d0ac9e0.3469a6",
        "type": "darksky-credentials",
        "z": "",
        "key_identifier": "vincent@vanderkruit.com"
    },
    {
        "id": "e6eadaf8.394978",
        "type": "lgtv-config",
        "z": "",
        "host": "192.168.1.92"
    },
    {
        "id": "6b04c042.321",
        "type": "lgtv-config",
        "z": "",
        "host": "192.168.1.97"
    },
    {
        "id": "7f128864.aa8628",
        "type": "lgtv-config",
        "z": "",
        "host": "192.168.1.95"
    },
    {
        "id": "a0b35919.2f8bf8",
        "type": "server",
        "z": "",
        "name": "Home Assistant",
        "url": "http://192.168.1.100:8123",
        "pass": ""
    },
    {
        "id": "7906960.7effd6c",
        "type": "mqtt in",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "topic": "+/+/+/value/#",
        "qos": "2",
        "broker": "e33aa8df.806938",
        "x": 132,
        "y": 874,
        "wires": [
            [
                "3c9c56c6.e27d4a",
                "c0e338b3.3817b8"
            ]
        ]
    },
    {
        "id": "3c9c56c6.e27d4a",
        "type": "debug",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 860.9999961853027,
        "y": 848.9999694824219,
        "wires": []
    },
    {
        "id": "605e147d.4aa46c",
        "type": "get stations data",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "creds": "f8bbaad3.3e5e08",
        "x": 300,
        "y": 235,
        "wires": [
            [
                "7b8f11ab.b8a3d",
                "f3b67a92.acb3c8",
                "cd54c06.6a6a14",
                "6a19663c.d8f6b8",
                "3f3b2baa.5c6ca4",
                "d3f6861.b133e78",
                "4e204246.bc63cc",
                "37f83339.d8587c",
                "de081e6a.0562d",
                "855291ba.6c56c",
                "23f7dd3d.39d532",
                "a829e911.8249e8"
            ]
        ]
    },
    {
        "id": "4f0b82fe.c3206c",
        "type": "inject",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "600",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 122,
        "y": 236,
        "wires": [
            [
                "605e147d.4aa46c"
            ]
        ]
    },
    {
        "id": "59615a3c.b2e714",
        "type": "mysql",
        "z": "f8c3d2e.ff7853",
        "mydb": "76eac5e0.de774c",
        "name": "TimeSeries",
        "x": 1096,
        "y": 236,
        "wires": [
            [
                "26eb4d03.fc3132"
            ]
        ]
    },
    {
        "id": "17991179.5dce5f",
        "type": "template",
        "z": "f8c3d2e.ff7853",
        "name": "Insert measurement",
        "field": "topic",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "INSERT INTO measurements (location,name,devicetype,messagetype,system,extra,value) VALUES (\"{{location}}\",\"{{name}}\",\"{{devicetype}}\",\"{{messagetype}}\",\"{{system}}\",\"{{extra}}\",{{value}});",
        "output": "str",
        "x": 871,
        "y": 240,
        "wires": [
            [
                "59615a3c.b2e714",
                "2d0f8985.2a8d36"
            ]
        ]
    },
    {
        "id": "7b8f11ab.b8a3d",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Temperature",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "huiskamer",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "basestation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "temperature",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].dashboard_data.Temperature",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 517,
        "y": 92,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "2d0f8985.2a8d36",
        "type": "debug",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 1222,
        "y": 391,
        "wires": []
    },
    {
        "id": "f3b67a92.acb3c8",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set CO2",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "huiskamer",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "basestation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "CO2",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].dashboard_data.CO2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 484,
        "y": 150,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "cd54c06.6a6a14",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Humidity",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "huiskamer",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "basestation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "humidity",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].dashboard_data.Humidity",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 499,
        "y": 206,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "6a19663c.d8f6b8",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Pressure",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "huiskamer",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "basestation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "pressure",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].dashboard_data.Pressure",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 502,
        "y": 258,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "3f3b2baa.5c6ca4",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Rain",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "terras",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "regenmeter",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "rain",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].modules[0].dashboard_data.Rain",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 491,
        "y": 309,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "d3f6861.b133e78",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Outside Temperature",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "terras",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "outdoorstation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "temperature",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].modules[1].dashboard_data.Temperature",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 536,
        "y": 369,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "4e204246.bc63cc",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Outside Humidity",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "terras",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "outdoorstation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "humidity",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].modules[1].dashboard_data.Humidity",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 526,
        "y": 432,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "37f83339.d8587c",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Outside WindStrength",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "terras",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "outdoorstation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "windStrength",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].modules[2].dashboard_data.WindStrength",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 539,
        "y": 494,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "de081e6a.0562d",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Outside WindAngle",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "terras",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "outdoorstation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "windStrength",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].modules[2].dashboard_data.WindAngle",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 537,
        "y": 550,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "23f7dd3d.39d532",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Outside GustAngle",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "terras",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "outdoorstation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "gustAngle",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].modules[2].dashboard_data.GustAngle",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 527,
        "y": 671,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "855291ba.6c56c",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Outside GustStrength",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "terras",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "outdoorstation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "gustStrength",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].modules[2].dashboard_data.GustStrength",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 535,
        "y": 610,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "2bae136a.4ae26c",
        "type": "function",
        "z": "78477e05.07c09",
        "name": "parseParts",
        "func": "var parts = msg.topic.split('/');\n//node.warn(parts);\nif(parts.length>0)\n    msg.location = parts[0];\n\nif(parts.length>1)\n    msg.name = parts[1];\n\nif(parts.length>2)\n    msg.devicetype = parts[2];\n\nif(parts.length>3)\n    msg.messagetype = parts[3];\n\nif(parts.length>4)\n    msg.system = parts[4];\n\nif(parts.length>5)\n    msg.extra = parts[5];\n\nif(msg.payload!==null)\n    msg.value = msg.payload;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 250,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "27df7afb.f56b76",
        "type": "change",
        "z": "1f8a59d.c5c0ca6",
        "name": "set 15",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "15",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 598.0000228881836,
        "y": 113.99999523162842,
        "wires": [
            [
                "8767d53e.2a1338"
            ]
        ]
    },
    {
        "id": "c742af14.e7f52",
        "type": "change",
        "z": "1f8a59d.c5c0ca6",
        "name": "set 22",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "22",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 789.9999771118164,
        "y": 267.9999694824219,
        "wires": [
            [
                "8767d53e.2a1338"
            ]
        ]
    },
    {
        "id": "d146885c.8d91e8",
        "type": "bigtimer",
        "z": "1f8a59d.c5c0ca6",
        "outtopic": "shutdown",
        "outpayload1": "on",
        "outpayload2": "",
        "name": "Daily shutdown 22:30",
        "lat": "51.999711",
        "lon": "4.200049",
        "starttime": "1350",
        "endtime": "1365",
        "startoff": 0,
        "endoff": 0,
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 111,
        "y": 145.00000476837158,
        "wires": [
            [
                "27df7afb.f56b76"
            ],
            [],
            []
        ]
    },
    {
        "id": "6f0ea14c.a6707",
        "type": "comment",
        "z": "b01a2cb9.9baef",
        "name": "Can be Removed",
        "info": "",
        "x": 141,
        "y": 470,
        "wires": []
    },
    {
        "id": "7a91a568.b2f25c",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "To Bed",
        "url": "/enterbed",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 111,
        "y": 170,
        "wires": [
            [
                "9195586.c6bf2a8",
                "6e20ef0d.f3bfb"
            ]
        ]
    },
    {
        "id": "4d2a1b8d.6e1794",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Exit house",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Exit house",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "status",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 591.9999771118164,
        "y": 660.9999370574951,
        "wires": [
            []
        ]
    },
    {
        "id": "6e20ef0d.f3bfb",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Enter Bed",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Enter Bed",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "status",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 342,
        "y": 248,
        "wires": [
            [
                "e273f18e.9ccdc",
                "6fb40943.716008"
            ]
        ]
    },
    {
        "id": "38f6ba0e.2cf046",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "AtHome true",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "athome",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 354,
        "y": 570,
        "wires": [
            []
        ]
    },
    {
        "id": "9195586.c6bf2a8",
        "type": "http response",
        "z": "b01a2cb9.9baef",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 331,
        "y": 170,
        "wires": []
    },
    {
        "id": "3c4d7b4c.9fc614",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "Exit Home",
        "url": "/exithome",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 101,
        "y": 650,
        "wires": [
            [
                "5b3d3fc7.e844",
                "581813d2.79cb0c"
            ]
        ]
    },
    {
        "id": "a7aed069.6a836",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Exit Bed",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Exit Bed",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "status",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 339.1238250732422,
        "y": 313.7523422241211,
        "wires": [
            [
                "22295877.bc5ee8",
                "4571dfe7.99cc9",
                "6fb40943.716008"
            ]
        ]
    },
    {
        "id": "581813d2.79cb0c",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "AtHome false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "athome",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 353,
        "y": 649,
        "wires": [
            [
                "4d2a1b8d.6e1794"
            ]
        ]
    },
    {
        "id": "720e66e8.66fb18",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "From Bed",
        "url": "/exitbed",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 121,
        "y": 250,
        "wires": [
            [
                "9195586.c6bf2a8",
                "a7aed069.6a836"
            ]
        ]
    },
    {
        "id": "5b3d3fc7.e844",
        "type": "http response",
        "z": "b01a2cb9.9baef",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 331,
        "y": 510,
        "wires": []
    },
    {
        "id": "ceb79811.bb0168",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "Enter Home",
        "url": "/enterhome",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 111,
        "y": 570,
        "wires": [
            [
                "5b3d3fc7.e844",
                "38f6ba0e.2cf046"
            ]
        ]
    },
    {
        "id": "b9884042.5ff2c",
        "type": "comment",
        "z": "b01a2cb9.9baef",
        "name": "Manage Bed status",
        "info": "",
        "x": 151,
        "y": 90,
        "wires": []
    },
    {
        "id": "f2a50e98.dad85",
        "type": "http in",
        "z": "aaabbee3.5276e",
        "name": "New weight",
        "url": "/newweight",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 92,
        "y": 356,
        "wires": [
            [
                "26393fd5.bb8fe",
                "b2187c63.9afd9",
                "632817d.2f78ae8",
                "215560f7.86563"
            ]
        ]
    },
    {
        "id": "dcf96f6.c0f439",
        "type": "prowl",
        "z": "aaabbee3.5276e",
        "title": "App",
        "priority": 0,
        "url": "",
        "name": "Update",
        "x": 832,
        "y": 317,
        "wires": []
    },
    {
        "id": "b2187c63.9afd9",
        "type": "trigger",
        "z": "aaabbee3.5276e",
        "op1": "",
        "op2": "Wegen!",
        "op1type": "nul",
        "op2type": "str",
        "duration": "36",
        "extend": true,
        "units": "hr",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 441,
        "y": 65,
        "wires": [
            [
                "dcf96f6.c0f439"
            ]
        ]
    },
    {
        "id": "3e955fef.95e39",
        "type": "inject",
        "z": "aaabbee3.5276e",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 201,
        "y": 123,
        "wires": [
            [
                "b2187c63.9afd9",
                "632817d.2f78ae8"
            ]
        ]
    },
    {
        "id": "8283902.217927",
        "type": "e-mail",
        "z": "aaabbee3.5276e",
        "server": "mail.vanderkruit.com",
        "port": "25",
        "secure": false,
        "name": "rigo@hoencamp.net",
        "dname": "",
        "x": 648,
        "y": 148,
        "wires": []
    },
    {
        "id": "632817d.2f78ae8",
        "type": "trigger",
        "z": "aaabbee3.5276e",
        "op1": "",
        "op2": "Vincent 3 dagen niet op de weegschaal gestaan....",
        "op1type": "nul",
        "op2type": "str",
        "duration": "84",
        "extend": true,
        "units": "hr",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 430,
        "y": 150,
        "wires": [
            [
                "8283902.217927",
                "dcf96f6.c0f439"
            ]
        ]
    },
    {
        "id": "26393fd5.bb8fe",
        "type": "http response",
        "z": "aaabbee3.5276e",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 147,
        "y": 244,
        "wires": []
    },
    {
        "id": "c1a9dd4b.ece17",
        "type": "inject",
        "z": "aaabbee3.5276e",
        "name": "",
        "topic": "",
        "payload": "149.2",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 121,
        "y": 461,
        "wires": [
            [
                "215560f7.86563"
            ]
        ]
    },
    {
        "id": "215560f7.86563",
        "type": "function",
        "z": "aaabbee3.5276e",
        "name": "Convert To Number",
        "func": "msg.payload = Number(msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 341,
        "y": 461,
        "wires": [
            [
                "eedd6884.196888"
            ]
        ]
    },
    {
        "id": "9e93c185.1fc98",
        "type": "debug",
        "z": "aaabbee3.5276e",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "x": 801,
        "y": 541,
        "wires": []
    },
    {
        "id": "3c99747f.af4e5c",
        "type": "file in",
        "z": "aaabbee3.5276e",
        "name": "Read weight targets",
        "filename": "c:\\weighttargets.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "x": 211,
        "y": 541,
        "wires": [
            [
                "696a235f.b0e9dc"
            ]
        ]
    },
    {
        "id": "696a235f.b0e9dc",
        "type": "csv",
        "z": "aaabbee3.5276e",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "x": 401,
        "y": 541,
        "wires": [
            [
                "bba32952.235338"
            ]
        ]
    },
    {
        "id": "eedd6884.196888",
        "type": "function",
        "z": "aaabbee3.5276e",
        "name": "save to flow context",
        "func": "//var flow = this.context().flow;\nflow.set(\"lastweight\", msg.payload);\n// global.get(\"athome\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 581,
        "y": 461,
        "wires": [
            [
                "3c99747f.af4e5c"
            ]
        ]
    },
    {
        "id": "bba32952.235338",
        "type": "function",
        "z": "aaabbee3.5276e",
        "name": "make message",
        "func": "var nextTarget;\nvar lastWeight = flow.get(\"lastweight\");\n//node.warn(lastWeight);\nmsg.payload.forEach(function(element) {\n    element.delta = element.Value-lastWeight;\n//   node.warn(element);\n});\nvar comparisonTarget = {\n    Value:-10\n}\nmsg.payload.forEach(function(element) {\n    if(element.Value>comparisonTarget.Value && element.Target!==\"Next KG (wk avg)\"){\n    //if(element.Value>comparisonTarget.Value){\n        comparisonTarget = element;\n    }\n});\n//node.warn(highest);\nvar deltaString = (comparisonTarget.delta*-1).toFixed(1);\nvar comparisonValueString = comparisonTarget.Value.toFixed(1);\nvar weekAverage = lastWeight + comparisonTarget.delta;\nvar weekAverageString = weekAverage.toFixed(1);\nnode.warn(weekAverage);\nnode.warn(comparisonTarget);\n\nif(comparisonTarget.delta>0){\n    msg.payload = \"Weight:\"+lastWeight+\" You have reached \" + comparisonTarget.Target +\" of \" + comparisonTarget.Value;\n}else{\n    msg.payload =\"Weight:\"+lastWeight+\" \" +comparisonTarget.Target+ \":\"+ deltaString +\" to go for \" +comparisonValueString;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 571,
        "y": 541,
        "wires": [
            [
                "9e93c185.1fc98",
                "dcf96f6.c0f439"
            ]
        ]
    },
    {
        "id": "d0c13b1c.664078",
        "type": "debug",
        "z": "3aed527a.e169fe",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 990,
        "y": 100,
        "wires": []
    },
    {
        "id": "2838fe5e.9f9ed2",
        "type": "change",
        "z": "1f30ecc.3cf9813",
        "name": "set color command",
        "rules": [
            {
                "p": "command",
                "t": "set",
                "to": "COLOR",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "f675494c.3ac288",
        "type": "debug",
        "z": "3aed527a.e169fe",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 1190,
        "y": 100,
        "wires": []
    },
    {
        "id": "93460a39.3feb98",
        "type": "template",
        "z": "a8c1ffd8.16e1",
        "name": "format color command",
        "field": "url",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "192.168.1.99/iotserver/api/RFLink/command?id={{id}}&command={{command}}&color={{color}}&brightness={{brightness}}",
        "output": "str",
        "x": 740,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "e282c203.9f886",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "false",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "false",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "ffcfd4e1.307568",
        "type": "subflow:8a844107.6e076",
        "z": "375d1e4f.6a9d22",
        "name": "",
        "x": 610,
        "y": 180,
        "wires": [
            [
                "7c6c9d38.16fbf4"
            ],
            [
                "cb514997.0b2228"
            ]
        ]
    },
    {
        "id": "e1e1e718.159648",
        "type": "exec",
        "z": "375d1e4f.6a9d22",
        "command": "C:\\WoL\\shutdownServer.bat",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Shutdown Server",
        "x": 814.0000228881836,
        "y": 327.99998903274536,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "155172dd.afa01d",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "1",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "1",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "96b9a739.a0bab8",
        "type": "debug",
        "z": "375d1e4f.6a9d22",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 1150,
        "y": 540,
        "wires": []
    },
    {
        "id": "220380b9.a768",
        "type": "subflow:851545fd.080be8",
        "z": "3aed527a.e169fe",
        "name": "",
        "x": 1390,
        "y": 200,
        "wires": []
    },
    {
        "id": "a4f4134a.4c4c8",
        "type": "subflow:8a844107.6e076",
        "z": "375d1e4f.6a9d22",
        "name": "",
        "x": 570,
        "y": 520,
        "wires": [
            [],
            [
                "8126fafe.dc5668"
            ]
        ]
    },
    {
        "id": "1b398784.d69528",
        "type": "change",
        "z": "3aed527a.e169fe",
        "name": "topic Weather warning",
        "rules": [
            {
                "p": "topic",
                "t": "set",
                "to": "Weather warning",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 200,
        "wires": [
            [
                "220380b9.a768"
            ]
        ]
    },
    {
        "id": "bdb8d7f8.d7a2a8",
        "type": "inject",
        "z": "3aed527a.e169fe",
        "name": "AwakeTime",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "*/5 7-23 * * *",
        "once": true,
        "onceDelay": "300",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "93355f5d.e5a0d"
            ]
        ]
    },
    {
        "id": "a6eb7664.685838",
        "type": "subflow:8a844107.6e076",
        "z": "375d1e4f.6a9d22",
        "name": "",
        "x": 570,
        "y": 420,
        "wires": [
            [
                "1aa6a9e8.b0d866"
            ],
            [
                "7b582a51.8e9e74"
            ]
        ]
    },
    {
        "id": "d0aee3b2.e90fd",
        "type": "change",
        "z": "17a402a4.2bd49d",
        "name": "OFF",
        "rules": [
            {
                "p": "command",
                "t": "set",
                "to": "OFF",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "fe689f2b.a3883",
        "type": "template",
        "z": "a8c1ffd8.16e1",
        "name": "format color command",
        "field": "url",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "192.168.1.100:5003/api/RFLink/command?id={{id}}&command={{command}}&color={{color}}&brightness={{brightness}}",
        "output": "str",
        "x": 740,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "3112e0d2.170ab",
        "type": "comment",
        "z": "a8c1ffd8.16e1",
        "name": "Raspberry",
        "info": "",
        "x": 700,
        "y": 260,
        "wires": []
    },
    {
        "id": "f874086d.554d28",
        "type": "change",
        "z": "851545fd.080be8",
        "name": "Remove topic",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 180,
        "wires": [
            [
                "cbdf249e.9a02f8"
            ]
        ]
    },
    {
        "id": "9dc653a4.ae4e2",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "0",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "0",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "743c7826.444bb8",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "ON",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "ON",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "f224f4f.15a9e08",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "On",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "On",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "ab72a6d1.27cf68",
        "type": "switch",
        "z": "68815de1.ca2394",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "v": "on",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "true",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "ON",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "On",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "1",
                "vt": "num",
                "t": "eq"
            },
            {
                "v": "off",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "false",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "OFF",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "0",
                "vt": "num",
                "t": "eq"
            },
            {
                "v": "Off",
                "vt": "str",
                "t": "eq"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 10,
        "x": 350,
        "y": 380,
        "wires": [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "41ecc9af.4ef048",
        "type": "subflow:8a844107.6e076",
        "z": "375d1e4f.6a9d22",
        "name": "",
        "x": 590,
        "y": 640,
        "wires": [
            [],
            [
                "711132f6.3ffa4c"
            ]
        ]
    },
    {
        "id": "ebf33a61.e43d68",
        "type": "rbe",
        "z": "3aed527a.e169fe",
        "name": "Change in milliseconds vs last input",
        "func": "deadbandEq",
        "gap": "14400",
        "start": "",
        "inout": "in",
        "property": "timestamp",
        "x": 680,
        "y": 300,
        "wires": [
            [
                "82f3dd10.3c4e6"
            ]
        ]
    },
    {
        "id": "89b8f6f4.a45168",
        "type": "function",
        "z": "f8f656ed.e6b658",
        "name": "Capitalize",
        "func": "msg.payload = msg.payload.toUpperCase();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 220,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "82f3dd10.3c4e6",
        "type": "template",
        "z": "3aed527a.e169fe",
        "name": "message",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Rain forecast: {{date}} !",
        "output": "str",
        "x": 960,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "a3d5a333.4407f",
        "type": "change",
        "z": "cc35ed80.8e43c",
        "name": "ON",
        "rules": [
            {
                "p": "command",
                "t": "set",
                "to": "ON",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "8126fafe.dc5668",
        "type": "change",
        "z": "375d1e4f.6a9d22",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "turnOff",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 778,
        "y": 522,
        "wires": [
            [
                "8b40435a.8ddac",
                "e12b78d9.6f2c38"
            ]
        ]
    },
    {
        "id": "2f122f31.88c49",
        "type": "subflow:8a844107.6e076",
        "z": "375d1e4f.6a9d22",
        "name": "",
        "x": 570,
        "y": 720,
        "wires": [
            [
                "4ac8a620.3555e8"
            ],
            []
        ]
    },
    {
        "id": "11f5ef76.47aac1",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "off",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "off",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "5d6f697.78f9798",
        "type": "change",
        "z": "68815de1.ca2394",
        "name": "false",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "false",
                "tot": "bool",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "4320fffc.f4e25",
        "type": "switch",
        "z": "a8c1ffd8.16e1",
        "name": "",
        "property": "command",
        "propertyType": "msg",
        "rules": [
            {
                "v": "COLOR",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "ON",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "OFF",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "BRIGHT",
                "vt": "str",
                "t": "eq"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 490,
        "y": 440,
        "wires": [
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "c5b9f0ad.d9864",
        "type": "function",
        "z": "a8c1ffd8.16e1",
        "name": "set id",
        "func": "msg.id = flow.get(\"id\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 330,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "5dd45263.13af3c",
        "type": "function",
        "z": "a8c1ffd8.16e1",
        "name": "store id",
        "func": "if(msg.topic === \"id\"){\n    flow.set(\"id\", msg.payload); \n    // node.warn(\"id saved\");\n    // node.warn(msg);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 340,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "675d4065.62998",
        "type": "function",
        "z": "68815de1.ca2394",
        "name": "",
        "func": "if(msg.payload === false) return [null,msg,null];\n// node.warn(\"voorbij false\");\nif(msg.payload === true) return [msg,null,null];\nreturn [null,null,msg];\n",
        "outputs": 3,
        "noerr": 0,
        "x": 310,
        "y": 220,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "4047021b.5c8dac",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "OFF",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "OFF",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "ff25c535.234288",
        "type": "switch",
        "z": "3aed527a.e169fe",
        "name": "Timesplit",
        "property": "minutes",
        "propertyType": "msg",
        "rules": [
            {
                "v": "1",
                "vt": "num",
                "t": "btwn",
                "v2": "30",
                "v2t": "num"
            },
            {
                "v": "30",
                "vt": "num",
                "t": "btwn",
                "v2": "1440",
                "v2t": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 720,
        "y": 200,
        "wires": [
            [
                "2865c812.537448"
            ],
            [
                "ebf33a61.e43d68"
            ]
        ],
        "outputLabels": [
            "0-30",
            ""
        ]
    },
    {
        "id": "cbdf249e.9a02f8",
        "type": "mqtt out",
        "z": "851545fd.080be8",
        "name": "",
        "topic": "koraal/echo/say/command/echo",
        "qos": "",
        "retain": "",
        "broker": "e33aa8df.806938",
        "x": 490,
        "y": 180,
        "wires": []
    },
    {
        "id": "e2e5cc54.c5c38",
        "type": "comment",
        "z": "a8c1ffd8.16e1",
        "name": "PC",
        "info": "",
        "x": 690,
        "y": 380,
        "wires": []
    },
    {
        "id": "b496d066.7bae2",
        "type": "function",
        "z": "1f30ecc.3cf9813",
        "name": "set color",
        "func": "if(msg.color === undefined){\n    msg.color = msg.payload;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 290,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "a7a23f47.b0b58",
        "type": "prowl",
        "z": "3aed527a.e169fe",
        "title": "Weather Warning",
        "priority": 0,
        "url": "Weather Warning",
        "name": "",
        "x": 1190,
        "y": 300,
        "wires": []
    },
    {
        "id": "e77df78b.ed9e58",
        "type": "function",
        "z": "3aed527a.e169fe",
        "name": "Set NextRainInMinutes",
        "func": "function getRainMinutes(dataPoints, msg, skip) {\n    // node.warn(dataPoints);\n    for(i=skip;i<dataPoints.length;i++){\n    var dataPoint = dataPoints[i];\n    if(dataPoint.precipProbability>lowerProbability){\n        msg.minutes = (dataPoint.time*1000-Date.now())/(60*1000);\n        msg.timestamp = dataPoint.time*1000;\n        msg.payload = dataPoint.time;\n//        node.warn(msg.minutes);\n//        node.warn(i);\n        return msg;\n    }\n    msg.minutes = -1;\n    return msg;\n    }\n}\n\nvar lowerProbability = 0.30;\nmsg = getRainMinutes(msg.data.minutely.data, msg,0);\n// node.warn(\"checking hours\");\nif(msg.minutes === -1){\n    msg = getRainMinutes(msg.data.hourly.data, msg,2);\n}\n\n// formatting\nmsg.minutes = Math.round(msg.minutes);\nvar date = new Date(msg.timestamp);\nvar day = date.getDate();\nvar today =  new Date().getDate(); // Date.now().getDate();\nvar hour = date.getHours();\nif(day == today){\n    msg.date = \"Today around \"+hour +\":00\"\n} else{\n    msg.date = \"Tomorrow around \"+hour +\":00\"\n}\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 500,
        "y": 200,
        "wires": [
            [
                "ff25c535.234288"
            ]
        ]
    },
    {
        "id": "2865c812.537448",
        "type": "template",
        "z": "3aed527a.e169fe",
        "name": "message",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Rain in {{minutes}} minutes;",
        "output": "str",
        "x": 920,
        "y": 200,
        "wires": [
            [
                "1b398784.d69528"
            ]
        ]
    },
    {
        "id": "b571e1ee.e4fbc",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "on",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "on",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "6b731e8b.83811",
        "type": "debug",
        "z": "3aed527a.e169fe",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 443,
        "y": 499.99999046325684,
        "wires": []
    },
    {
        "id": "7456bf90.ca8d1",
        "type": "change",
        "z": "68815de1.ca2394",
        "name": "true",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "true",
                "tot": "bool",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "3ad5bc7c.222344",
        "type": "switch",
        "z": "acc34840.af99d8",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "v": "ON",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "On",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "1",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "true",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "on",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "OFF",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "Off",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "0",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "false",
                "vt": "str",
                "t": "eq"
            },
            {
                "v": "off",
                "vt": "str",
                "t": "eq"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 10,
        "x": 210,
        "y": 220,
        "wires": [
            [
                "4047021b.5c8dac"
            ],
            [
                "dc0500f1.e0c65"
            ],
            [
                "9dc653a4.ae4e2"
            ],
            [
                "e282c203.9f886"
            ],
            [
                "11f5ef76.47aac1"
            ],
            [
                "743c7826.444bb8"
            ],
            [
                "f224f4f.15a9e08"
            ],
            [
                "155172dd.afa01d"
            ],
            [
                "765e1859.8dd7c8"
            ],
            [
                "b571e1ee.e4fbc"
            ]
        ]
    },
    {
        "id": "29874dc1.583062",
        "type": "prowl",
        "z": "851545fd.080be8",
        "title": "",
        "priority": "-2",
        "url": "",
        "name": "",
        "x": 230,
        "y": 40,
        "wires": []
    },
    {
        "id": "711132f6.3ffa4c",
        "type": "change",
        "z": "375d1e4f.6a9d22",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "turnOff",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 783,
        "y": 643,
        "wires": [
            [
                "4b7ad036.191d1"
            ]
        ]
    },
    {
        "id": "93f537d6.5b7388",
        "type": "http request",
        "z": "a8c1ffd8.16e1",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "url": "",
        "tls": "",
        "x": 990,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "765e1859.8dd7c8",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "true",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "true",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "cba6ebde.e30c88",
        "type": "function",
        "z": "8a844107.6e076",
        "name": "",
        "func": "if(msg.payload === false) return [null,msg,null];\n// node.warn(\"voorbij false\");\nif(msg.payload === true) return [msg,null,null];\nreturn [null,null,msg];\n",
        "outputs": 3,
        "noerr": 0,
        "x": 410,
        "y": 420,
        "wires": [
            [],
            [],
            [
                "a93b3c4.0f638c"
            ]
        ]
    },
    {
        "id": "b575e484.506478",
        "type": "debug",
        "z": "3aed527a.e169fe",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 730,
        "y": 100,
        "wires": []
    },
    {
        "id": "a93b3c4.0f638c",
        "type": "switch",
        "z": "8a844107.6e076",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "On",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "OFF",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "Off",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 10,
        "x": 510,
        "y": 580,
        "wires": [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "dc0500f1.e0c65",
        "type": "change",
        "z": "acc34840.af99d8",
        "name": "Off",
        "rules": [
            {
                "p": "payload",
                "t": "set",
                "to": "Off",
                "tot": "str",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "c3a17558.8cbda8",
        "type": "subflow:8a844107.6e076",
        "z": "375d1e4f.6a9d22",
        "name": "On/Off",
        "x": 584.0000228881836,
        "y": 287.99998903274536,
        "wires": [
            [
                "69441586.008c0c"
            ],
            [
                "e1e1e718.159648"
            ]
        ]
    },
    {
        "id": "553cbc2d.6829a4",
        "type": "change",
        "z": "3aed527a.e169fe",
        "name": "Set temperature",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "data.currently.temperature",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "outsideTemperature",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "4b7ad036.191d1",
        "type": "lgtv-control",
        "z": "375d1e4f.6a9d22",
        "tv": "e6eadaf8.394978",
        "name": "bedroom tv",
        "x": 984,
        "y": 645,
        "wires": [
            []
        ]
    },
    {
        "id": "8b40435a.8ddac",
        "type": "lgtv-control",
        "z": "375d1e4f.6a9d22",
        "tv": "6b04c042.321",
        "name": "livingroom tv wifi",
        "x": 980.0000267028809,
        "y": 472.00001525878906,
        "wires": [
            []
        ]
    },
    {
        "id": "93355f5d.e5a0d",
        "type": "darksky",
        "z": "3aed527a.e169fe",
        "darksky": "2d0ac9e0.3469a6",
        "name": "",
        "lon": "4.200080",
        "lat": "51.999520",
        "date": "",
        "time": "",
        "mode": "node",
        "lang": "en",
        "units": "si",
        "x": 300,
        "y": 200,
        "wires": [
            [
                "e77df78b.ed9e58",
                "553cbc2d.6829a4"
            ]
        ]
    },
    {
        "id": "69441586.008c0c",
        "type": "wake on lan",
        "z": "375d1e4f.6a9d22",
        "mac": "70:85:C2:02:22:71",
        "host": "192.168.1.101",
        "name": "Server",
        "x": 774.0000228881836,
        "y": 247.99998903274536,
        "wires": []
    },
    {
        "id": "4ac8a620.3555e8",
        "type": "wake on lan",
        "z": "375d1e4f.6a9d22",
        "mac": "50:1A:C5:B0:68:4E",
        "host": "192.168.1.94",
        "name": "Xbox",
        "x": 730,
        "y": 720,
        "wires": []
    },
    {
        "id": "c0e338b3.3817b8",
        "type": "subflow:78477e05.07c09",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "x": 397,
        "y": 810,
        "wires": [
            [
                "86956d44.24ee6",
                "c9f12a1b.be5888"
            ]
        ]
    },
    {
        "id": "86956d44.24ee6",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 586,
        "y": 812,
        "wires": [
            [
                "17991179.5dce5f",
                "3c9c56c6.e27d4a"
            ]
        ]
    },
    {
        "id": "914fe766.3de498",
        "type": "comment",
        "z": "f8c3d2e.ff7853",
        "name": "NetAtmo",
        "info": "",
        "x": 140,
        "y": 88,
        "wires": []
    },
    {
        "id": "a829e911.8249e8",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "Set Noise",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "huiskamer",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "basestation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "noise",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "netatmo",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.devices[0].dashboard_data.Noise",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 493,
        "y": 728,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "33808f46.e28cd",
        "type": "function",
        "z": "f4f34383.c51b7",
        "name": "set var",
        "func": "flow.set(\"i\", 0);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 354.00000190734863,
        "y": 292.99999237060547,
        "wires": [
            []
        ]
    },
    {
        "id": "3710ac16.36e374",
        "type": "delay",
        "z": "f4f34383.c51b7",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 524.0000019073486,
        "y": 372.99999237060547,
        "wires": [
            []
        ]
    },
    {
        "id": "dc49ea27.0027a8",
        "type": "inject",
        "z": "f4f34383.c51b7",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 118.99999618530273,
        "y": 459.9999885559082,
        "wires": [
            [
                "ad2bdf7e.04602"
            ]
        ]
    },
    {
        "id": "4978314d.17698",
        "type": "function",
        "z": "f4f34383.c51b7",
        "name": "change rgb",
        "func": "var i = flow.get(\"i\");\nvar red   = Math.round(Math.sin(0.3*i + 0) * 127 + 128);\nvar green = Math.round(Math.sin(0.3*i + 2) * 127 + 128);\nvar blue  = Math.round(Math.sin(0.3*i + 4) * 127 + 128);\n\ni++;\nif (i>=32) {\n    i = 0;\n}\n\nflow.set(\"i\", i);\n\nmsg.payload = [red, green, blue]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 534.0000019073486,
        "y": 292.99999237060547,
        "wires": [
            []
        ]
    },
    {
        "id": "57d97f37.8834",
        "type": "change",
        "z": "1f8a59d.c5c0ca6",
        "name": "Set Temperature",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "kantoor",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "thermostat",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "temperature",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "nest",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.ambient_temperature_c",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 514.9953308105469,
        "y": 599.9999198913574,
        "wires": [
            [
                "da83236f.5826c"
            ]
        ]
    },
    {
        "id": "297102e.db62ffe",
        "type": "change",
        "z": "1f8a59d.c5c0ca6",
        "name": "Set Humidity",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "kantoor",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "thermostat",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "humidity",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "nest",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.humidity",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 501.9953193664551,
        "y": 663.2727003097534,
        "wires": [
            [
                "da83236f.5826c"
            ]
        ]
    },
    {
        "id": "390574e7.7a61ec",
        "type": "inject",
        "z": "1f8a59d.c5c0ca6",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "60",
        "x": 80.00000762939453,
        "y": 598.6364574432373,
        "wires": [
            [
                "12700b6f.af9375"
            ]
        ]
    },
    {
        "id": "12700b6f.af9375",
        "type": "http request",
        "z": "1f8a59d.c5c0ca6",
        "name": "Thermostat Data",
        "method": "GET",
        "ret": "obj",
        "url": "http://localhost/iotserver/api/nest/thermostat/data",
        "tls": "",
        "x": 284.7812957763672,
        "y": 599.1109590530396,
        "wires": [
            [
                "297102e.db62ffe",
                "57d97f37.8834",
                "a6c73288.2fe38"
            ]
        ]
    },
    {
        "id": "e8735c1b.f1efa",
        "type": "debug",
        "z": "1f8a59d.c5c0ca6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 889.9858741760254,
        "y": 683.3579635620117,
        "wires": []
    },
    {
        "id": "da83236f.5826c",
        "type": "link out",
        "z": "1f8a59d.c5c0ca6",
        "name": "dataThermostat",
        "links": [
            "8e5776c.c2bfa88"
        ],
        "x": 714.0000238418579,
        "y": 682.9999189376831,
        "wires": []
    },
    {
        "id": "8e5776c.c2bfa88",
        "type": "link in",
        "z": "f8c3d2e.ff7853",
        "name": "loggingToSql",
        "links": [
            "da83236f.5826c"
        ],
        "x": 646,
        "y": 39,
        "wires": [
            [
                "17991179.5dce5f"
            ]
        ]
    },
    {
        "id": "a6c73288.2fe38",
        "type": "change",
        "z": "1f8a59d.c5c0ca6",
        "name": "Set TemperatureTarget",
        "rules": [
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "target",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "name",
                "pt": "msg",
                "to": "thermostat",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "devicetype",
                "pt": "msg",
                "to": "temperature",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "messagetype",
                "pt": "msg",
                "to": "measurement",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "system",
                "pt": "msg",
                "to": "nest",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "value",
                "pt": "msg",
                "to": "payload.target_temperature_c",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 525.0000152587891,
        "y": 531.9999561309814,
        "wires": [
            [
                "da83236f.5826c",
                "e8735c1b.f1efa"
            ]
        ]
    },
    {
        "id": "e273f18e.9ccdc",
        "type": "delay",
        "z": "b01a2cb9.9baef",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "8",
        "rateUnits": "hour",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 711.4999847412109,
        "y": 246.00002670288086,
        "wires": [
            [
                "b4fad9fa.a26448"
            ]
        ]
    },
    {
        "id": "9055589a.d88198",
        "type": "comment",
        "z": "b01a2cb9.9baef",
        "name": "Manage Daylight",
        "info": "",
        "x": 92,
        "y": 778.9999332427979,
        "wires": []
    },
    {
        "id": "38f71943.f69506",
        "type": "inject",
        "z": "b01a2cb9.9baef",
        "name": "Day",
        "topic": "sunlight",
        "payload": "on",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 135,
        "y": 941,
        "wires": [
            [
                "a3b67c32.22b87"
            ]
        ]
    },
    {
        "id": "87126ac1.df4088",
        "type": "comment",
        "z": "b01a2cb9.9baef",
        "name": "Debug daylight",
        "info": "",
        "x": 106,
        "y": 899,
        "wires": []
    },
    {
        "id": "e12b78d9.6f2c38",
        "type": "lgtv-control",
        "z": "375d1e4f.6a9d22",
        "tv": "7f128864.aa8628",
        "name": "livingroom tv cable",
        "x": 988,
        "y": 538,
        "wires": [
            []
        ]
    },
    {
        "id": "26eb4d03.fc3132",
        "type": "debug",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 1220.3333740234375,
        "y": 142,
        "wires": []
    },
    {
        "id": "a7583053.2c006",
        "type": "trigger-state",
        "z": "aa9f90ed.25077",
        "name": "WC on",
        "server": "a0b35919.2f8bf8",
        "entityid": "switch.aeotec_zw111_nano_dimmer_switch_wc",
        "debugenabled": false,
        "constraints": [
            {
                "id": "wb47ydrjz1",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 3,
        "customoutputs": [
            {
                "outputId": "9gy899zgbnw",
                "messageType": "default",
                "messageValue": "",
                "comparatorPropertyType": "always",
                "comparatorPropertyValue": "",
                "comparatorType": "is",
                "comparatorValue": ""
            }
        ],
        "x": 112.99999618530273,
        "y": 464.0000343322754,
        "wires": [
            [
                "c69c88c6.8f1668"
            ],
            [],
            []
        ]
    },
    {
        "id": "370ef832.7e7108",
        "type": "api-call-service",
        "z": "aa9f90ed.25077",
        "name": "WC off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.aeotec_zw111_nano_dimmer_switch_wc\" }",
        "mergecontext": "",
        "x": 463.00001525878906,
        "y": 454.0000057220459,
        "wires": [
            []
        ]
    },
    {
        "id": "e6df15e2.367ad8",
        "type": "trigger-state",
        "z": "aa9f90ed.25077",
        "name": "Badkamer on switch",
        "server": "a0b35919.2f8bf8",
        "entityid": "switch.aeotec_zw111_nano_dimmer_switch_badkamer",
        "debugenabled": false,
        "constraints": [
            {
                "id": "0hn5jkvsggw6",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 160.99999618530273,
        "y": 123.99999618530273,
        "wires": [
            [
                "1c74cb2a.ad4865"
            ],
            []
        ]
    },
    {
        "id": "f5753e8f.06b87",
        "type": "api-call-service",
        "z": "aa9f90ed.25077",
        "name": "Badkamer off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.aeotec_zw111_nano_dimmer_switch_badkamer\" }",
        "mergecontext": "",
        "x": 573.9999732971191,
        "y": 122.00000190734863,
        "wires": [
            []
        ]
    },
    {
        "id": "4790b667.205188",
        "type": "api-call-service",
        "z": "851545fd.080be8",
        "name": "Notify",
        "server": "a0b35919.2f8bf8",
        "service_domain": "notify",
        "service": "ios_iphone",
        "data": "",
        "mergecontext": "",
        "x": 765.0001678466797,
        "y": 235.99999046325684,
        "wires": [
            []
        ]
    },
    {
        "id": "6a12f04.af9a61",
        "type": "template",
        "z": "851545fd.080be8",
        "name": "",
        "field": "payload.data",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\"message\":\"{{data}}\"}",
        "output": "json",
        "x": 614,
        "y": 246.33332347869873,
        "wires": [
            [
                "4790b667.205188",
                "6125c8f5.3ad488"
            ]
        ]
    },
    {
        "id": "e5ee85de.f36d38",
        "type": "change",
        "z": "851545fd.080be8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "msg.topic & \":\" & msg.payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "data",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload.domain",
                "pt": "msg",
                "to": "notify",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.service",
                "pt": "msg",
                "to": "ios_iphone",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 421,
        "y": 248.333327293396,
        "wires": [
            [
                "6a12f04.af9a61"
            ]
        ]
    },
    {
        "id": "1c74cb2a.ad4865",
        "type": "trigger",
        "z": "aa9f90ed.25077",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "pay",
        "duration": "20",
        "extend": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 380.0115737915039,
        "y": 120.0277624130249,
        "wires": [
            [
                "f5753e8f.06b87"
            ]
        ]
    },
    {
        "id": "c69c88c6.8f1668",
        "type": "trigger",
        "z": "aa9f90ed.25077",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "pay",
        "duration": "8",
        "extend": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 290.0115623474121,
        "y": 450.0277862548828,
        "wires": [
            [
                "370ef832.7e7108"
            ]
        ]
    },
    {
        "id": "7bd3ff73.e2e81",
        "type": "api-call-service",
        "z": "1f8a59d.c5c0ca6",
        "name": "",
        "server": "a0b35919.2f8bf8",
        "service_domain": "climate",
        "service": "set_temperature",
        "data": "{   \"entity_id\": \"climate.living_room\" }",
        "mergecontext": "",
        "x": 1257.7840576171875,
        "y": 192.6448516845703,
        "wires": [
            [
                "486faee7.13919"
            ]
        ]
    },
    {
        "id": "6538f534.aa9e9c",
        "type": "trigger-state",
        "z": "aa9f90ed.25077",
        "name": "WC movement",
        "server": "a0b35919.2f8bf8",
        "entityid": "binary_sensor.neo_coolcam_battery_powered_pir_sensor_sensor_wc",
        "debugenabled": false,
        "constraints": [
            {
                "id": "4ty3zy8fo1b",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 130.78975296020508,
        "y": 528.5823659896851,
        "wires": [
            [
                "1436df89.5db6b"
            ],
            []
        ]
    },
    {
        "id": "1436df89.5db6b",
        "type": "api-call-service",
        "z": "aa9f90ed.25077",
        "name": "WC on",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"switch.aeotec_zw111_nano_dimmer_switch_wc\" }",
        "mergecontext": "",
        "x": 325.014217376709,
        "y": 522.0056896209717,
        "wires": [
            []
        ]
    },
    {
        "id": "46e92c11.2d1874",
        "type": "api-call-service",
        "z": "aa9f90ed.25077",
        "name": "Badkamer on",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"switch.aeotec_zw111_nano_dimmer_switch_badkamer\" }",
        "mergecontext": "",
        "x": 391.0142250061035,
        "y": 178.00566720962524,
        "wires": [
            []
        ]
    },
    {
        "id": "887deeb0.458e7",
        "type": "trigger-state",
        "z": "aa9f90ed.25077",
        "name": "Badkamer movement",
        "server": "a0b35919.2f8bf8",
        "entityid": "binary_sensor.neo_coolcam_battery_powered_pir_sensor_sensor_badkamer",
        "debugenabled": false,
        "constraints": [
            {
                "id": "4ty3zy8fo1b",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 155.01420211791992,
        "y": 179.0056667327881,
        "wires": [
            [
                "46e92c11.2d1874"
            ],
            []
        ]
    },
    {
        "id": "cb514997.0b2228",
        "type": "conf ping",
        "z": "375d1e4f.6a9d22",
        "name": "Ping PC",
        "host": "192.168.1.99",
        "timeout": "5",
        "requests": "1",
        "x": 757.5085754394531,
        "y": 189.81817531585693,
        "wires": [
            [
                "5b2cccee.2081a4"
            ]
        ]
    },
    {
        "id": "5b2cccee.2081a4",
        "type": "switch",
        "z": "375d1e4f.6a9d22",
        "name": "IsOnline?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 916.784065246582,
        "y": 190.5965757369995,
        "wires": [
            [
                "2f8e8038.8f7e8"
            ],
            []
        ],
        "outputLabels": [
            "Online",
            "Offline"
        ]
    },
    {
        "id": "824d42f8.16dc8",
        "type": "change",
        "z": "bfd62bd3.8ae858",
        "name": "Add choice",
        "rules": [
            {
                "t": "set",
                "p": "payload.data.data.push.category",
                "pt": "msg",
                "to": "action",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.service",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.domain",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 513.0815162658691,
        "y": 95.38077163696289,
        "wires": [
            [
                "3b434fbb.23aad",
                "1143561a.547e4a"
            ]
        ]
    },
    {
        "id": "91789e8d.d5ae2",
        "type": "trigger-state",
        "z": "b01a2cb9.9baef",
        "name": "OwnTracks home",
        "server": "a0b35919.2f8bf8",
        "entityid": "device_tracker.vincent_iphoneowntracks",
        "debugenabled": false,
        "constraints": [
            {
                "id": "xawxys0wt1b",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 104.00946807861328,
        "y": 1289.732738494873,
        "wires": [
            [
                "35deb46a.8acc1c",
                "633ac590.35050c"
            ],
            [
                "b9e4634d.5b601",
                "cc78b5ca.37beb8"
            ]
        ]
    },
    {
        "id": "d142f591.832c28",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Set Vincent Home",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"input_boolean.vincent_home\" }",
        "mergecontext": "",
        "x": 718.9336318969727,
        "y": 1185.0793552398682,
        "wires": [
            [
                "126c3591.16ef0a"
            ]
        ]
    },
    {
        "id": "c9915ad5.76c148",
        "type": "trigger-state",
        "z": "b01a2cb9.9baef",
        "name": "Vincent Home",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.vincent_home",
        "debugenabled": false,
        "constraints": [
            {
                "id": "bhfbklhlhmn",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 109.9336929321289,
        "y": 1441.2101345062256,
        "wires": [
            [
                "25da56b1.b23faa"
            ],
            [
                "875fe022.000e4"
            ]
        ]
    },
    {
        "id": "875fe022.000e4",
        "type": "api-current-state",
        "z": "b01a2cb9.9baef",
        "name": "Block If Guests",
        "server": "a0b35919.2f8bf8",
        "halt_if": "on",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.guests_home",
        "x": 557.9337005615234,
        "y": 1445.1570444107056,
        "wires": [
            [
                "1aa8e45e.60c61c"
            ]
        ]
    },
    {
        "id": "25da56b1.b23faa",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Set AtHome",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"input_boolean.at_home\" }",
        "mergecontext": "",
        "x": 330.9355354309082,
        "y": 1471.7194547653198,
        "wires": [
            []
        ]
    },
    {
        "id": "1aa8e45e.60c61c",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Set Not AtHome",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"input_boolean.at_home\" }",
        "mergecontext": "",
        "x": 783.009407043457,
        "y": 1506.0962505340576,
        "wires": [
            []
        ]
    },
    {
        "id": "160ccf5c.8760b1",
        "type": "trigger-state",
        "z": "b01a2cb9.9baef",
        "name": "Guests",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.guests_home",
        "debugenabled": false,
        "constraints": [
            {
                "id": "3eiaofv08bj",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 132.00948333740234,
        "y": 1522.096384048462,
        "wires": [
            [
                "25da56b1.b23faa"
            ],
            [
                "a5baf3e6.7db71"
            ]
        ]
    },
    {
        "id": "a5baf3e6.7db71",
        "type": "api-current-state",
        "z": "b01a2cb9.9baef",
        "name": "Block If Vincent at Home",
        "server": "a0b35919.2f8bf8",
        "halt_if": "on",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.vincent_home",
        "x": 371.0095443725586,
        "y": 1557.0965614318848,
        "wires": [
            [
                "1aa8e45e.60c61c"
            ]
        ]
    },
    {
        "id": "9a877de9.75c87",
        "type": "comment",
        "z": "b01a2cb9.9baef",
        "name": "Manage At Home",
        "info": "",
        "x": 101.00948715209961,
        "y": 1166.3692264556885,
        "wires": []
    },
    {
        "id": "fb483f60.c6f81",
        "type": "bigtimer",
        "z": "b01a2cb9.9baef",
        "outtopic": "sunlight",
        "outpayload1": "on",
        "outpayload2": "off",
        "name": "Sunrise/Sunset",
        "lat": "51.999597",
        "lon": "4.200064",
        "starttime": "5003",
        "endtime": "5004",
        "startoff": 0,
        "endoff": 0,
        "offs": 0,
        "outtext1": "on",
        "outtext2": "off",
        "timeout": "1440",
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 108.93547058105469,
        "y": 840.619306564331,
        "wires": [
            [
                "a3b67c32.22b87"
            ],
            [],
            []
        ]
    },
    {
        "id": "a3b67c32.22b87",
        "type": "subflow:8a844107.6e076",
        "z": "b01a2cb9.9baef",
        "name": "",
        "x": 298.0095024108887,
        "y": 832.4602346420288,
        "wires": [
            [
                "5c1b498d.633828"
            ],
            [
                "886de8a4.ca9fa8"
            ]
        ]
    },
    {
        "id": "5c1b498d.633828",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Turn on Daylight",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"input_boolean.daylight\" }",
        "mergecontext": "",
        "x": 480.93370819091797,
        "y": 825.8086423873901,
        "wires": [
            []
        ]
    },
    {
        "id": "886de8a4.ca9fa8",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Turn off Daylight",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"input_boolean.daylight\" }",
        "mergecontext": "",
        "x": 479.0094909667969,
        "y": 872.5510864257812,
        "wires": [
            []
        ]
    },
    {
        "id": "61c53188.53161",
        "type": "api-current-state",
        "z": "35694a1c.27fc86",
        "name": "If Day",
        "server": "a0b35919.2f8bf8",
        "halt_if": "off",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.daylight",
        "x": 201.93558883666992,
        "y": 138.60602569580078,
        "wires": [
            []
        ]
    },
    {
        "id": "c005a6ac.f6ebc8",
        "type": "api-current-state",
        "z": "35694a1c.27fc86",
        "name": "If Night",
        "server": "a0b35919.2f8bf8",
        "halt_if": "on",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.daylight",
        "x": 209.00946807861328,
        "y": 239.00566959381104,
        "wires": [
            []
        ]
    },
    {
        "id": "77da8868.b275c8",
        "type": "subflow:35694a1c.27fc86",
        "z": "922b9d9f.0323",
        "name": "",
        "x": 421.0094985961914,
        "y": 124.00564098358154,
        "wires": [
            [],
            [
                "f8e1b9eb.141508",
                "da7f8653.de4cd8",
                "cb1ba3b2.b5598"
            ]
        ]
    },
    {
        "id": "d76d616e.0a748",
        "type": "trigger-state",
        "z": "922b9d9f.0323",
        "name": "AtHome",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.at_home",
        "debugenabled": false,
        "constraints": [
            {
                "id": "0fy10bc8pq0n",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 93.0189437866211,
        "y": 116.92027950286865,
        "wires": [
            [
                "77da8868.b275c8"
            ],
            []
        ]
    },
    {
        "id": "e4a23a59.b77188",
        "type": "comment",
        "z": "922b9d9f.0323",
        "name": "AtHome Changes",
        "info": "",
        "x": 100.00946807861328,
        "y": 64.28398895263672,
        "wires": []
    },
    {
        "id": "31cb3f03.15a1b",
        "type": "trigger-state",
        "z": "1f8a59d.c5c0ca6",
        "name": "AtHome",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.at_home",
        "debugenabled": false,
        "constraints": [
            {
                "id": "rk0uk4vxuei",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 65,
        "y": 261.7329864501953,
        "wires": [
            [
                "b62f38f8.6de848"
            ],
            []
        ]
    },
    {
        "id": "f8e1b9eb.141508",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Kamerlicht On",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"switch.kamerlicht\" }",
        "mergecontext": "",
        "x": 816.9392166137695,
        "y": 103.43937397003174,
        "wires": [
            []
        ]
    },
    {
        "id": "11d1f1ea.b3357e",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Kamerlicht Off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.kamerlicht\" }",
        "mergecontext": "",
        "x": 899.009464263916,
        "y": 364.00562381744385,
        "wires": [
            []
        ]
    },
    {
        "id": "b4fad9fa.a26448",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Turn on Bed",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"input_boolean.vincent_in_bed\" }",
        "mergecontext": "",
        "x": 977.0093994140625,
        "y": 242.00569820404053,
        "wires": [
            []
        ]
    },
    {
        "id": "22295877.bc5ee8",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Turn off Bed",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"input_boolean.vincent_in_bed\" }",
        "mergecontext": "",
        "x": 755.0094604492188,
        "y": 360.00561332702637,
        "wires": [
            []
        ]
    },
    {
        "id": "e6c34e3f.78c75",
        "type": "weekday",
        "z": "1f8a59d.c5c0ca6",
        "name": "IsWeekend",
        "sun": true,
        "mon": false,
        "tue": false,
        "wed": false,
        "thu": false,
        "fri": false,
        "sat": true,
        "x": 244.00943756103516,
        "y": 328.00556564331055,
        "wires": [
            [
                "47708670.eb01a8"
            ],
            []
        ],
        "outputLabels": [
            "Weeekend",
            "Weekday"
        ]
    },
    {
        "id": "47708670.eb01a8",
        "type": "time-range-switch",
        "z": "1f8a59d.c5c0ca6",
        "name": "IsMorning",
        "lat": "",
        "lon": "",
        "startTime": "06:00",
        "endTime": "12:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 430.0095100402832,
        "y": 333.00558280944824,
        "wires": [
            [
                "c742af14.e7f52"
            ],
            []
        ],
        "outputLabels": [
            "Morning",
            "Not Morning"
        ]
    },
    {
        "id": "4571dfe7.99cc9",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Reset",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "reset",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 515.5093994140625,
        "y": 264.9450340270996,
        "wires": [
            [
                "e273f18e.9ccdc"
            ]
        ]
    },
    {
        "id": "491267bf.e2e058",
        "type": "link in",
        "z": "922b9d9f.0323",
        "name": "lights off",
        "links": [
            "597c90ec.6a3b"
        ],
        "x": 740.9336318969727,
        "y": 425.08702278137207,
        "wires": [
            [
                "11d1f1ea.b3357e",
                "548c3056.0ed32",
                "758c1a19.542604",
                "5711af9d.3a505",
                "de2fdbd9.63e618",
                "8fe09ffa.ba538"
            ]
        ]
    },
    {
        "id": "597c90ec.6a3b",
        "type": "link out",
        "z": "922b9d9f.0323",
        "name": "notAtHome",
        "links": [
            "491267bf.e2e058"
        ],
        "x": 536.9373826980591,
        "y": 461.8806371688843,
        "wires": []
    },
    {
        "id": "955e5f55.c88f6",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Keukenlicht On",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"switch.keukenlicht\" }",
        "mergecontext": "",
        "x": 819.0094604492188,
        "y": 150.0056915283203,
        "wires": [
            []
        ]
    },
    {
        "id": "cb1ba3b2.b5598",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Buitenlicht On",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"switch.buitenlicht\" }",
        "mergecontext": "",
        "x": 814.0094604492188,
        "y": 186.0056915283203,
        "wires": [
            []
        ]
    },
    {
        "id": "da7f8653.de4cd8",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Barlicht On",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"switch.barlicht\" }",
        "mergecontext": "",
        "x": 803.0094604492188,
        "y": 228.0056915283203,
        "wires": [
            []
        ]
    },
    {
        "id": "5711af9d.3a505",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Barlicht Off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.barlicht\" }",
        "mergecontext": "",
        "x": 895.0095252990723,
        "y": 493.00562286376953,
        "wires": [
            []
        ]
    },
    {
        "id": "758c1a19.542604",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Buitenlicht Off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.buitenlicht\" }",
        "mergecontext": "",
        "x": 906.0095252990723,
        "y": 451.00562286376953,
        "wires": [
            []
        ]
    },
    {
        "id": "548c3056.0ed32",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Keukenlicht Off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.keukenlicht\" }",
        "mergecontext": "",
        "x": 911.0095252990723,
        "y": 415.00562286376953,
        "wires": [
            []
        ]
    },
    {
        "id": "5db30acb.613b44",
        "type": "subflow:8a844107.6e076",
        "z": "922b9d9f.0323",
        "name": "",
        "x": 402.93749046325684,
        "y": 428.82946395874023,
        "wires": [
            [
                "f8e1b9eb.141508",
                "cb1ba3b2.b5598",
                "da7f8653.de4cd8"
            ],
            [
                "597c90ec.6a3b"
            ]
        ]
    },
    {
        "id": "8767d53e.2a1338",
        "type": "change",
        "z": "1f8a59d.c5c0ca6",
        "name": "set temperature",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload.data.temperature",
                "pt": "msg",
                "to": "temp",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "temp",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 991.0093841552734,
        "y": 192.00566482543945,
        "wires": [
            [
                "7bd3ff73.e2e81"
            ]
        ]
    },
    {
        "id": "b62f38f8.6de848",
        "type": "time-range-switch",
        "z": "1f8a59d.c5c0ca6",
        "name": "",
        "lat": "",
        "lon": "",
        "startTime": "21:00",
        "endTime": "06:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 287.93563079833984,
        "y": 261.28779220581055,
        "wires": [
            [],
            [
                "c742af14.e7f52"
            ]
        ]
    },
    {
        "id": "e91723d4.abef7",
        "type": "subflow:851545fd.080be8",
        "z": "1f8a59d.c5c0ca6",
        "name": "",
        "x": 1760.9352416992188,
        "y": 188.77645111083984,
        "wires": []
    },
    {
        "id": "7cf42969.ac41e8",
        "type": "trigger-state",
        "z": "1f8a59d.c5c0ca6",
        "name": "InBed",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.vincent_in_bed",
        "debugenabled": false,
        "constraints": [
            {
                "id": "ekaq0eken8f",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 58.93559265136719,
        "y": 329.4979944229126,
        "wires": [
            [],
            [
                "e6c34e3f.78c75"
            ]
        ]
    },
    {
        "id": "d5a7e541.e0ef98",
        "type": "comment",
        "z": "1f8a59d.c5c0ca6",
        "name": "Record Temperature NEST",
        "info": "",
        "x": 129.0094757080078,
        "y": 470.005654335022,
        "wires": []
    },
    {
        "id": "c9f12a1b.be5888",
        "type": "switch",
        "z": "f8c3d2e.ff7853",
        "name": "devicetype",
        "property": "devicetype",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "power",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 359.78122901916504,
        "y": 983.3237972259521,
        "wires": [
            [
                "9eb49bb5.653238"
            ]
        ]
    },
    {
        "id": "871e324.1d0bfd",
        "type": "api-call-service",
        "z": "f8c3d2e.ff7853",
        "name": "Set Power",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_number",
        "service": "set_value",
        "data": "{   \"entity_id\": \"input_number.power\" }",
        "mergecontext": "",
        "x": 790.7840347290039,
        "y": 983.6447982788086,
        "wires": [
            [
                "c3dbed2e.e1a7d"
            ]
        ]
    },
    {
        "id": "9eb49bb5.653238",
        "type": "change",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload.data.value",
                "pt": "msg",
                "to": "$number(value)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 574.7897567749023,
        "y": 983.4005012512207,
        "wires": [
            [
                "871e324.1d0bfd"
            ]
        ]
    },
    {
        "id": "c3dbed2e.e1a7d",
        "type": "debug",
        "z": "f8c3d2e.ff7853",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 1074.0141830444336,
        "y": 974.6419563293457,
        "wires": []
    },
    {
        "id": "17f7e1ba.4eff3e",
        "type": "trigger-state",
        "z": "922b9d9f.0323",
        "name": "Daylight",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.daylight",
        "debugenabled": false,
        "constraints": [
            {
                "id": "skm36xljzb8",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 81.01420593261719,
        "y": 227.00565719604492,
        "wires": [
            [],
            [
                "c2ac8826.af6198"
            ]
        ]
    },
    {
        "id": "c2ac8826.af6198",
        "type": "subflow:405d007b.0887d",
        "z": "922b9d9f.0323",
        "name": "",
        "x": 317.78125762939453,
        "y": 222.80109405517578,
        "wires": [
            [
                "77da8868.b275c8"
            ],
            []
        ]
    },
    {
        "id": "e45dc852.6e1a08",
        "type": "api-current-state",
        "z": "405d007b.0887d",
        "name": "Block if not At home",
        "server": "a0b35919.2f8bf8",
        "halt_if": "off",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.at_home",
        "x": 318.79261779785156,
        "y": 270.1590805053711,
        "wires": [
            []
        ]
    },
    {
        "id": "6966cb4a.6cb754",
        "type": "api-current-state",
        "z": "405d007b.0887d",
        "name": "Block if At home",
        "server": "a0b35919.2f8bf8",
        "halt_if": "on",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.at_home",
        "x": 303.0141830444336,
        "y": 333.0056982040405,
        "wires": [
            []
        ]
    },
    {
        "id": "27a5ebe1.345034",
        "type": "change",
        "z": "bfd62bd3.8ae858",
        "name": "Push: set topic/payload",
        "rules": [
            {
                "t": "set",
                "p": "data",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload.data.message",
                "pt": "msg",
                "to": "data",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.data.title",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 296.01424407958984,
        "y": 98.64208984375,
        "wires": [
            [
                "824d42f8.16dc8"
            ]
        ]
    },
    {
        "id": "903732c9.1e0d8",
        "type": "server-events",
        "z": "c255db5.4d13a28",
        "name": "All",
        "server": "a0b35919.2f8bf8",
        "x": 55,
        "y": 40.64207077026367,
        "wires": [
            [
                "35d8fff3.b0aa8"
            ]
        ]
    },
    {
        "id": "35d8fff3.b0aa8",
        "type": "switch",
        "z": "c255db5.4d13a28",
        "name": "Pass Ios notification actions",
        "property": "event_type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ios.notification_action_fired",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 262.0028762817383,
        "y": 40.01412105560303,
        "wires": [
            [
                "116f7c56.d9d764"
            ]
        ]
    },
    {
        "id": "116f7c56.d9d764",
        "type": "switch",
        "z": "c255db5.4d13a28",
        "name": "actionname",
        "property": "payload.event.actionName",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "CANCEL_TEMPERATURE",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SOUND_ALARM",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "CANCEL_ALARM",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 497.00571060180664,
        "y": 40.01409339904785,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "63dcb6b2.3dcca8",
        "type": "subflow:c255db5.4d13a28",
        "z": "1f8a59d.c5c0ca6",
        "name": "Ios_action_notifications",
        "x": 200.0170440673828,
        "y": 77.32805252075195,
        "wires": [
            [
                "27df7afb.f56b76"
            ],
            [],
            []
        ]
    },
    {
        "id": "f71d502a.5d97f",
        "type": "subflow:c255db5.4d13a28",
        "z": "c13cf3fe.71f31",
        "name": "",
        "x": 124.7926254272461,
        "y": 258.78124618530273,
        "wires": [
            [],
            [
                "d56480b6.bfb31"
            ],
            [
                "c491a8d4.ec2838",
                "2129f8ef.6274c8"
            ]
        ]
    },
    {
        "id": "10429e3c.cf0492",
        "type": "api-call-service",
        "z": "e247e4d8.86ae58",
        "name": "",
        "server": "a0b35919.2f8bf8",
        "service_domain": "tts",
        "service": "google_say",
        "data": "{   \"entity_id\": \"media_player.googlehome_kantoor\" }",
        "mergecontext": "",
        "x": 569.9317779541016,
        "y": 108.78781986236572,
        "wires": [
            []
        ]
    },
    {
        "id": "636e5354.a67a6c",
        "type": "change",
        "z": "e247e4d8.86ae58",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "data",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload.data.message",
                "pt": "msg",
                "to": "data",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "data",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 335.93184661865234,
        "y": 112.70265197753906,
        "wires": [
            [
                "10429e3c.cf0492"
            ]
        ]
    },
    {
        "id": "c6846cdc.fcfa5",
        "type": "trigger",
        "z": "c13cf3fe.71f31",
        "op1": "Alarm - Intruder",
        "op2": "Alarm - Intruder",
        "op1type": "str",
        "op2type": "str",
        "duration": "-3",
        "extend": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 591.9354972839355,
        "y": 123.98862648010254,
        "wires": [
            [
                "e67175fb.d5cf08",
                "e9d1690a.e19ff8"
            ]
        ]
    },
    {
        "id": "b4878ffd.8dac2",
        "type": "delay",
        "z": "c13cf3fe.71f31",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 366.93375396728516,
        "y": 23.19118309020996,
        "wires": [
            [
                "de603bce.8409a8",
                "2129f8ef.6274c8"
            ]
        ]
    },
    {
        "id": "de603bce.8409a8",
        "type": "change",
        "z": "c13cf3fe.71f31",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 365.9355888366699,
        "y": 123.0814380645752,
        "wires": [
            [
                "c6846cdc.fcfa5"
            ]
        ]
    },
    {
        "id": "e67175fb.d5cf08",
        "type": "subflow:e247e4d8.86ae58",
        "z": "c13cf3fe.71f31",
        "name": "",
        "x": 792.9316596984863,
        "y": 123.71209907531738,
        "wires": []
    },
    {
        "id": "3b434fbb.23aad",
        "type": "api-call-service",
        "z": "bfd62bd3.8ae858",
        "name": "",
        "server": "a0b35919.2f8bf8",
        "service_domain": "notify",
        "service": "ios_iphone",
        "data": "",
        "mergecontext": "",
        "x": 739.0094375610352,
        "y": 96.00569725036621,
        "wires": [
            []
        ]
    },
    {
        "id": "1143561a.547e4a",
        "type": "api-call-service",
        "z": "bfd62bd3.8ae858",
        "name": "",
        "server": "a0b35919.2f8bf8",
        "service_domain": "notify",
        "service": "ios_vincent_ipad_pro",
        "data": "",
        "mergecontext": "",
        "x": 765.0094604492188,
        "y": 144.0056915283203,
        "wires": [
            []
        ]
    },
    {
        "id": "bc790893.3aaa08",
        "type": "subflow:bfd62bd3.8ae858",
        "z": "851545fd.080be8",
        "name": "",
        "x": 261.0094909667969,
        "y": 319.00567626953125,
        "wires": []
    },
    {
        "id": "486faee7.13919",
        "type": "change",
        "z": "1f8a59d.c5c0ca6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.data.temperature",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Temperature",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1558.1476287841797,
        "y": 192.6079158782959,
        "wires": [
            [
                "e91723d4.abef7",
                "524ab63b.a69858"
            ]
        ]
    },
    {
        "id": "bc6eed99.05f4d",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "f4f34383.c51b7",
        "name": "",
        "x": 703.1519775390625,
        "y": 292.35406494140625,
        "wires": []
    },
    {
        "id": "524ab63b.a69858",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "1f8a59d.c5c0ca6",
        "name": "",
        "x": 1756.706398010254,
        "y": 132.00567722320557,
        "wires": []
    },
    {
        "id": "38f4a345.28b87c",
        "type": "switch",
        "z": "fd7dbe32.1f2d2",
        "name": "if object",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "object",
                "vt": "object"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 211.0094451904297,
        "y": 187.00568675994873,
        "wires": [
            [
                "7f0a835.6b7ec7c"
            ],
            [
                "1c0c897a.013a57"
            ]
        ]
    },
    {
        "id": "7f0a835.6b7ec7c",
        "type": "json",
        "z": "fd7dbe32.1f2d2",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 383.1552200317383,
        "y": 57.66292095184326,
        "wires": [
            [
                "1c0c897a.013a57"
            ]
        ]
    },
    {
        "id": "e9b733c7.07366",
        "type": "mysql",
        "z": "fd7dbe32.1f2d2",
        "mydb": "76eac5e0.de774c",
        "name": "",
        "x": 674.2292404174805,
        "y": 100.39210033416748,
        "wires": [
            []
        ]
    },
    {
        "id": "1c0c897a.013a57",
        "type": "template",
        "z": "fd7dbe32.1f2d2",
        "name": "",
        "field": "topic",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "INSERT INTO log (topic, payload) VALUES ('{{topic}}', '{{payload}}');",
        "output": "str",
        "x": 599.1534805297852,
        "y": 290.7499837875366,
        "wires": [
            [
                "e9b733c7.07366"
            ]
        ]
    },
    {
        "id": "53b279cb.6c2e78",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "b01a2cb9.9baef",
        "name": "",
        "x": 1077.0095863342285,
        "y": 1180.3694114685059,
        "wires": []
    },
    {
        "id": "6fb40943.716008",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "b01a2cb9.9baef",
        "name": "",
        "x": 523.7840423583984,
        "y": 154.90624237060547,
        "wires": []
    },
    {
        "id": "59b48044.44cd5",
        "type": "inject",
        "z": "b01a2cb9.9baef",
        "name": "Night",
        "topic": "sunlight",
        "payload": "off",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 134.0142059326172,
        "y": 985.5511474609375,
        "wires": [
            [
                "a3b67c32.22b87"
            ]
        ]
    },
    {
        "id": "de2fdbd9.63e618",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "WC off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.aeotec_zw111_nano_dimmer_switch_wc\" }",
        "mergecontext": "",
        "x": 879.0142211914062,
        "y": 531.0056762695312,
        "wires": [
            []
        ]
    },
    {
        "id": "8fe09ffa.ba538",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Badkamer off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.aeotec_zw111_nano_dimmer_switch_badkamer\" }",
        "mergecontext": "",
        "x": 896.0141830444336,
        "y": 569.0057027339935,
        "wires": [
            []
        ]
    },
    {
        "id": "149bd889.5905e7",
        "type": "find-my-iphone",
        "z": "f4f34383.c51b7",
        "x": 575.5084686279297,
        "y": 1287.3124465942383,
        "wires": [
            [
                "654d452c.e4519c"
            ]
        ]
    },
    {
        "id": "9cf4bddb.4607e",
        "type": "inject",
        "z": "f4f34383.c51b7",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 306.7869110107422,
        "y": 1277.2272415161133,
        "wires": [
            [
                "149bd889.5905e7"
            ]
        ]
    },
    {
        "id": "654d452c.e4519c",
        "type": "debug",
        "z": "f4f34383.c51b7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 829.0142211914062,
        "y": 1290.460205078125,
        "wires": []
    },
    {
        "id": "1bcd8c8a.480543",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Set Vincent Away",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"input_boolean.vincent_home\" }",
        "mergecontext": "",
        "x": 732.0141716003418,
        "y": 1348.0052509307861,
        "wires": [
            [
                "ceb2efe8.91927"
            ]
        ]
    },
    {
        "id": "ceb2efe8.91927",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Away",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OwnTracks update",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Away",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 905.7812461853027,
        "y": 1347.5736103057861,
        "wires": [
            [
                "53b279cb.6c2e78"
            ]
        ]
    },
    {
        "id": "126c3591.16ef0a",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Home",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OwnTracks update",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Home",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 886.0142593383789,
        "y": 1184.005615234375,
        "wires": [
            [
                "53b279cb.6c2e78"
            ]
        ]
    },
    {
        "id": "cc78b5ca.37beb8",
        "type": "api-current-state",
        "z": "b01a2cb9.9baef",
        "name": "If Vincent at Home",
        "server": "a0b35919.2f8bf8",
        "halt_if": "off",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.vincent_home",
        "x": 357.7926025390625,
        "y": 1350.184639930725,
        "wires": [
            [
                "8a83f5d6.5a7c98"
            ]
        ]
    },
    {
        "id": "35deb46a.8acc1c",
        "type": "api-current-state",
        "z": "b01a2cb9.9baef",
        "name": "If Vincent not at Home",
        "server": "a0b35919.2f8bf8",
        "halt_if": "on",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.vincent_home",
        "x": 343.0142288208008,
        "y": 1187.096565246582,
        "wires": [
            [
                "e284e105.ef294"
            ]
        ]
    },
    {
        "id": "997a79fc.25f228",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "iPhone leaves home",
        "url": "/iPhoneLeavesHome",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 133.8333282470703,
        "y": 2334.466667175293,
        "wires": [
            [
                "2b8bac95.3bdf54",
                "c220c284.8a8b2"
            ]
        ]
    },
    {
        "id": "2b8bac95.3bdf54",
        "type": "http response",
        "z": "b01a2cb9.9baef",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 300.83341217041016,
        "y": 2369.2001881599426,
        "wires": []
    },
    {
        "id": "e3fd4a43.160c88",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "iPhone enters home",
        "url": "/iPhoneEntersHome",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 138,
        "y": 2404,
        "wires": [
            [
                "2b8bac95.3bdf54",
                "949fe107.bc255"
            ]
        ]
    },
    {
        "id": "ac116c97.14332",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "b01a2cb9.9baef",
        "name": "",
        "x": 566.0000152587891,
        "y": 2339.000165939331,
        "wires": []
    },
    {
        "id": "949fe107.bc255",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Enter home",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Enter home",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "GpsGate:iPhone",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 358.83334732055664,
        "y": 2404.933371782303,
        "wires": [
            [
                "ac116c97.14332",
                "a7c15e99.92076"
            ]
        ]
    },
    {
        "id": "c220c284.8a8b2",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Exit home",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Exit home",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "GpsGate:iPhone",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 2335.9999294281006,
        "wires": [
            [
                "ac116c97.14332",
                "a7c15e99.92076"
            ]
        ]
    },
    {
        "id": "a7c15e99.92076",
        "type": "subflow:851545fd.080be8",
        "z": "b01a2cb9.9baef",
        "name": "",
        "x": 558.9999923706055,
        "y": 2407.0002222061157,
        "wires": []
    },
    {
        "id": "8d18cccc.79947",
        "type": "comment",
        "z": "b01a2cb9.9baef",
        "name": "GpsGate",
        "info": "",
        "x": 64.83332824707031,
        "y": 2284.9333419799805,
        "wires": []
    },
    {
        "id": "186610b0.fe213f",
        "type": "trigger-state",
        "z": "c13cf3fe.71f31",
        "name": "Frontdoor",
        "server": "a0b35919.2f8bf8",
        "entityid": "binary_sensor.door_frontdoor_sensor",
        "debugenabled": false,
        "constraints": [
            {
                "id": "wfw8hnlxtz",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 83.78121948242188,
        "y": 492.9601402282715,
        "wires": [
            [
                "679693b1.7f6dfc"
            ],
            []
        ],
        "outputLabels": [
            "Close",
            "Open"
        ]
    },
    {
        "id": "e284e105.ef294",
        "type": "delay",
        "z": "b01a2cb9.9baef",
        "name": "",
        "pauseType": "delay",
        "timeout": "60",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 543.9392356872559,
        "y": 1185.596565246582,
        "wires": [
            [
                "d142f591.832c28"
            ]
        ]
    },
    {
        "id": "b9e4634d.5b601",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 364.93184661865234,
        "y": 1228.4811344146729,
        "wires": [
            [
                "e284e105.ef294"
            ]
        ]
    },
    {
        "id": "633ac590.35050c",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360.0094909667969,
        "y": 1281.1875,
        "wires": [
            [
                "8a83f5d6.5a7c98"
            ]
        ]
    },
    {
        "id": "8a83f5d6.5a7c98",
        "type": "delay",
        "z": "b01a2cb9.9baef",
        "name": "",
        "pauseType": "delay",
        "timeout": "60",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 544.0094299316406,
        "y": 1349.187481880188,
        "wires": [
            [
                "1bcd8c8a.480543"
            ]
        ]
    },
    {
        "id": "679693b1.7f6dfc",
        "type": "api-current-state",
        "z": "c13cf3fe.71f31",
        "name": "If house empty",
        "server": "a0b35919.2f8bf8",
        "halt_if": "on",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.at_home",
        "x": 286.0095329284668,
        "y": 535.0055980682373,
        "wires": [
            [
                "cda65657.7320a8",
                "afc54aa6.137408"
            ]
        ]
    },
    {
        "id": "afc54aa6.137408",
        "type": "change",
        "z": "c13cf3fe.71f31",
        "name": "action: alarm",
        "rules": [
            {
                "t": "set",
                "p": "action",
                "pt": "msg",
                "to": "alarm",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Someone in the house",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Alarm",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 727.0094833374023,
        "y": 536.0056657791138,
        "wires": [
            [
                "d7e8e960.7b9668"
            ]
        ]
    },
    {
        "id": "d7e8e960.7b9668",
        "type": "subflow:851545fd.080be8",
        "z": "c13cf3fe.71f31",
        "name": "",
        "x": 914.009391784668,
        "y": 535.0056438446045,
        "wires": []
    },
    {
        "id": "c038a532.1c1418",
        "type": "trigger-state",
        "z": "c13cf3fe.71f31",
        "name": "Alarm",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.alarm",
        "debugenabled": false,
        "constraints": [
            {
                "id": "wfw8hnlxtz",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 132.00947952270508,
        "y": 67.00568008422852,
        "wires": [
            [
                "b4878ffd.8dac2",
                "c6846cdc.fcfa5"
            ],
            [
                "de603bce.8409a8"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "2129f8ef.6274c8",
        "type": "api-call-service",
        "z": "c13cf3fe.71f31",
        "name": "Alarm off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"input_boolean.alarm\" }",
        "mergecontext": "",
        "x": 609.9355392456055,
        "y": 22.56242561340332,
        "wires": [
            []
        ]
    },
    {
        "id": "b2cf0bfa.5f7468",
        "type": "api-call-service",
        "z": "c13cf3fe.71f31",
        "name": "Alarm on",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"input_boolean.alarm\" }",
        "mergecontext": "",
        "x": 947.0094604492188,
        "y": 447.0055961608887,
        "wires": [
            []
        ]
    },
    {
        "id": "d56480b6.bfb31",
        "type": "delay",
        "z": "c13cf3fe.71f31",
        "name": "",
        "pauseType": "delay",
        "timeout": "60",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 779.0095367431641,
        "y": 449.0056743621826,
        "wires": [
            [
                "b2cf0bfa.5f7468"
            ]
        ]
    },
    {
        "id": "c491a8d4.ec2838",
        "type": "change",
        "z": "c13cf3fe.71f31",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 407.00951385498047,
        "y": 270.00567626953125,
        "wires": [
            [
                "d56480b6.bfb31"
            ]
        ]
    },
    {
        "id": "1dc3a93.fd50e57",
        "type": "trigger-state",
        "z": "c13cf3fe.71f31",
        "name": "Terrasdeur",
        "server": "a0b35919.2f8bf8",
        "entityid": "binary_sensor.door_terrasdeur_sensor",
        "debugenabled": false,
        "constraints": [
            {
                "id": "wfw8hnlxtz",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 97.00947570800781,
        "y": 591.0056467056274,
        "wires": [
            [
                "679693b1.7f6dfc"
            ],
            []
        ],
        "outputLabels": [
            "Open",
            "Close"
        ]
    },
    {
        "id": "2ff456e8.e281da",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "iPhone leaves Work",
        "url": "/iPhoneLeavesWork",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 138.0142059326172,
        "y": 2485.1875,
        "wires": [
            [
                "5f199906.d022c8",
                "65d120d2.131f2"
            ]
        ]
    },
    {
        "id": "5f199906.d022c8",
        "type": "http response",
        "z": "b01a2cb9.9baef",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 305.01428985595703,
        "y": 2519.9210209846497,
        "wires": []
    },
    {
        "id": "53138248.a9d80c",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "iPhone enters work",
        "url": "/iPhoneEntersWork",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 142.18087768554688,
        "y": 2554.720832824707,
        "wires": [
            [
                "5f199906.d022c8",
                "71d20cbd.8bc594"
            ]
        ]
    },
    {
        "id": "7cbf52e1.ede00c",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "b01a2cb9.9baef",
        "name": "",
        "x": 570.1808929443359,
        "y": 2489.720998764038,
        "wires": []
    },
    {
        "id": "71d20cbd.8bc594",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Enter work",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Enter work",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "GpsGate:iPhone",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 363.0142250061035,
        "y": 2555.65420460701,
        "wires": [
            [
                "7cbf52e1.ede00c",
                "756f6cc3.6325f4"
            ]
        ]
    },
    {
        "id": "65d120d2.131f2",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Exit work",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Exit work",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "GpsGate:iPhone",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 364.1808776855469,
        "y": 2486.7207622528076,
        "wires": [
            [
                "7cbf52e1.ede00c",
                "756f6cc3.6325f4"
            ]
        ]
    },
    {
        "id": "756f6cc3.6325f4",
        "type": "subflow:851545fd.080be8",
        "z": "b01a2cb9.9baef",
        "name": "",
        "x": 563.1808700561523,
        "y": 2557.7210550308228,
        "wires": []
    },
    {
        "id": "eaa26b03.351628",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "iPhone leaves Commute",
        "url": "/iPhoneLeavesCommute",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 162.0142059326172,
        "y": 2635.82373046875,
        "wires": [
            [
                "db897405.ed75b8",
                "e417801b.4fc1"
            ]
        ]
    },
    {
        "id": "db897405.ed75b8",
        "type": "http response",
        "z": "b01a2cb9.9baef",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 360.01428604125977,
        "y": 2670.557346343994,
        "wires": []
    },
    {
        "id": "ff50e39c.f8779",
        "type": "http in",
        "z": "b01a2cb9.9baef",
        "name": "iPhone enters Commute",
        "url": "/iPhoneEntersCommute",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 166.18087768554688,
        "y": 2705.357063293457,
        "wires": [
            [
                "db897405.ed75b8",
                "841de82e.3946c8"
            ]
        ]
    },
    {
        "id": "6d93f093.2756c",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "b01a2cb9.9baef",
        "name": "",
        "x": 574.1808929443359,
        "y": 2640.357229232788,
        "wires": []
    },
    {
        "id": "841de82e.3946c8",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Enter Commute",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Enter Commute",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "GpsGate:iPhone",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 377.0142250061035,
        "y": 2706.29043507576,
        "wires": [
            [
                "6d93f093.2756c",
                "3d9fb4bb.ee39ac"
            ]
        ]
    },
    {
        "id": "e417801b.4fc1",
        "type": "change",
        "z": "b01a2cb9.9baef",
        "name": "Exit Commute",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Exit Commute",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "GpsGate:iPhone",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 388.1808776855469,
        "y": 2637.3569927215576,
        "wires": [
            [
                "6d93f093.2756c",
                "3d9fb4bb.ee39ac"
            ]
        ]
    },
    {
        "id": "3d9fb4bb.ee39ac",
        "type": "subflow:851545fd.080be8",
        "z": "b01a2cb9.9baef",
        "name": "",
        "x": 567.1808700561523,
        "y": 2708.3572854995728,
        "wires": []
    },
    {
        "id": "499c45ba.34099c",
        "type": "time-range-switch",
        "z": "c13cf3fe.71f31",
        "name": "7-19",
        "lat": "",
        "lon": "",
        "startTime": "07:00",
        "endTime": "19:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 566.7926292419434,
        "y": 441.09647941589355,
        "wires": [
            [],
            [
                "d56480b6.bfb31"
            ]
        ]
    },
    {
        "id": "cda65657.7320a8",
        "type": "weekday",
        "z": "c13cf3fe.71f31",
        "name": "Tuesday",
        "sun": false,
        "mon": false,
        "tue": true,
        "wed": false,
        "thu": false,
        "fri": false,
        "sat": false,
        "x": 430.78690338134766,
        "y": 475.0823268890381,
        "wires": [
            [
                "499c45ba.34099c"
            ],
            [
                "d56480b6.bfb31"
            ]
        ]
    },
    {
        "id": "468ab041.9c2d8",
        "type": "inject",
        "z": "c13cf3fe.71f31",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 95.78692626953125,
        "y": 350.77271270751953,
        "wires": [
            [
                "cda65657.7320a8"
            ]
        ]
    },
    {
        "id": "28e50ac6.e84836",
        "type": "trigger-state",
        "z": "b01a2cb9.9baef",
        "name": "Shutdown",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.momentary_shutdown_action",
        "debugenabled": false,
        "constraints": [],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 122.01953125,
        "y": 2857.00390625,
        "wires": [
            [
                "a5edebd5.0afbe8"
            ],
            [
                "3673fc23.23dea4"
            ]
        ]
    },
    {
        "id": "a5edebd5.0afbe8",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Shutdown Bedmode",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "toggle",
        "data": "{   \"entity_id\": \"input_boolean.momentary_shutdown_bedmode_action\" }",
        "mergecontext": "",
        "x": 343.8959655761719,
        "y": 2815.9310569763184,
        "wires": [
            []
        ]
    },
    {
        "id": "3673fc23.23dea4",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Shutdown non-Bedmode",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "toggle",
        "data": "{   \"entity_id\": \"input_boolean.momentary_shutdown_nonbedmode_action\" }",
        "mergecontext": "",
        "x": 350.02486419677734,
        "y": 2877.2749824523926,
        "wires": [
            []
        ]
    },
    {
        "id": "70b402b8.97ffcc",
        "type": "comment",
        "z": "b01a2cb9.9baef",
        "name": "Shutdown",
        "info": "",
        "x": 65,
        "y": 2796.00390625,
        "wires": []
    },
    {
        "id": "6125c8f5.3ad488",
        "type": "api-call-service",
        "z": "851545fd.080be8",
        "name": "Notify",
        "server": "a0b35919.2f8bf8",
        "service_domain": "notify",
        "service": "ios_vincent_ipad_pro",
        "data": "",
        "mergecontext": "",
        "x": 772.0142211914062,
        "y": 285.00567626953125,
        "wires": [
            []
        ]
    },
    {
        "id": "24c196fe.8ef9aa",
        "type": "trigger-state",
        "z": "b01a2cb9.9baef",
        "name": "AtHome",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.at_home",
        "debugenabled": false,
        "constraints": [
            {
                "id": "rk0uk4vxuei",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 100.99999618530273,
        "y": 3027.2781143188477,
        "wires": [
            [],
            [
                "2e8a40a3.f03af"
            ]
        ]
    },
    {
        "id": "5abf44af.702a4c",
        "type": "trigger-state",
        "z": "b01a2cb9.9baef",
        "name": "InBed",
        "server": "a0b35919.2f8bf8",
        "entityid": "input_boolean.vincent_in_bed",
        "debugenabled": false,
        "constraints": [
            {
                "id": "ekaq0eken8f",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 107.93559265136719,
        "y": 3109.0432872772217,
        "wires": [
            [
                "71796e51.26c8d"
            ],
            []
        ]
    },
    {
        "id": "ae1f9646.0f51b8",
        "type": "comment",
        "z": "b01a2cb9.9baef",
        "name": "Initiate shutdowns on status",
        "info": "",
        "x": 125,
        "y": 2952.278263092041,
        "wires": []
    },
    {
        "id": "fb5fe19f.4e76f",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Shutdown Bedmode",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "toggle",
        "data": "{   \"entity_id\": \"input_boolean.momentary_shutdown_bedmode_action\" }",
        "mergecontext": "",
        "x": 490.00001525878906,
        "y": 3110.2779598236084,
        "wires": [
            []
        ]
    },
    {
        "id": "2e8a40a3.f03af",
        "type": "api-call-service",
        "z": "b01a2cb9.9baef",
        "name": "Shutdown Full",
        "server": "a0b35919.2f8bf8",
        "service_domain": "input_boolean",
        "service": "toggle",
        "data": "{   \"entity_id\": \"input_boolean.momentary_shutdown_action\" }",
        "mergecontext": "",
        "x": 297.00001525878906,
        "y": 3024.278263092041,
        "wires": [
            []
        ]
    },
    {
        "id": "249fd577.1fe10a",
        "type": "server-state-changed",
        "z": "1f8a59d.c5c0ca6",
        "name": "Shutdown Bedmode (also called on Full)",
        "server": "a0b35919.2f8bf8",
        "entityidfilter": "input_boolean.momentary_shutdown_bedmode_action",
        "entityidfiltertype": "substring",
        "haltifstate": "",
        "x": 165,
        "y": 214.00567626953125,
        "wires": [
            [
                "27df7afb.f56b76"
            ]
        ]
    },
    {
        "id": "71796e51.26c8d",
        "type": "api-current-state",
        "z": "b01a2cb9.9baef",
        "name": "Block If Guests",
        "server": "a0b35919.2f8bf8",
        "halt_if": "on",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "input_boolean.guests_home",
        "x": 271.0000457763672,
        "y": 3110.095697402954,
        "wires": [
            [
                "fb5fe19f.4e76f"
            ]
        ]
    },
    {
        "id": "28945021.e8465",
        "type": "server-state-changed",
        "z": "375d1e4f.6a9d22",
        "name": "Shutdown Bedmode",
        "server": "a0b35919.2f8bf8",
        "entityidfilter": "input_boolean.momentary_shutdown_bedmode_action",
        "entityidfiltertype": "substring",
        "haltifstate": "",
        "x": 95,
        "y": 71.00567245483398,
        "wires": [
            [
                "8d4e2b4.f477ad8"
            ]
        ]
    },
    {
        "id": "8a48d1c0.7784b",
        "type": "server-state-changed",
        "z": "375d1e4f.6a9d22",
        "name": "Shutdown Non-Bedmode",
        "server": "a0b35919.2f8bf8",
        "entityidfilter": "input_boolean.momentary_shutdown_nonbedmode_action",
        "entityidfiltertype": "substring",
        "haltifstate": "",
        "x": 115,
        "y": 523.2907183170319,
        "wires": [
            [
                "fe25b661.172a48"
            ]
        ]
    },
    {
        "id": "8d4e2b4.f477ad8",
        "type": "change",
        "z": "375d1e4f.6a9d22",
        "name": "Off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 292.78977966308594,
        "y": 69.67040824890137,
        "wires": [
            [
                "a4f4134a.4c4c8"
            ]
        ]
    },
    {
        "id": "fe25b661.172a48",
        "type": "change",
        "z": "375d1e4f.6a9d22",
        "name": "Off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 269.0142250061035,
        "y": 583.0056562423706,
        "wires": [
            [
                "41ecc9af.4ef048"
            ]
        ]
    },
    {
        "id": "c0a30ff5.2dfce",
        "type": "server-state-changed",
        "z": "922b9d9f.0323",
        "name": "Shutdown Bedmode",
        "server": "a0b35919.2f8bf8",
        "entityidfilter": "input_boolean.momentary_shutdown_bedmode_action",
        "entityidfiltertype": "substring",
        "haltifstate": "",
        "x": 197.01419830322266,
        "y": 504.00566482543945,
        "wires": [
            [
                "d872a311.f771"
            ]
        ]
    },
    {
        "id": "d872a311.f771",
        "type": "change",
        "z": "922b9d9f.0323",
        "name": "Off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 395.8040084838867,
        "y": 506.6703815460205,
        "wires": [
            [
                "597c90ec.6a3b"
            ]
        ]
    },
    {
        "id": "2166f805.c39f28",
        "type": "trigger-state",
        "z": "f4f34383.c51b7",
        "name": "Home",
        "server": "a0b35919.2f8bf8",
        "entityid": "zone.home",
        "debugenabled": false,
        "constraints": [],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 108.01420593261719,
        "y": 1476.3692626953125,
        "wires": [
            [
                "e5be3426.1368e8",
                "4b73e80d.f8e3d8",
                "6a5cde6b.7103"
            ],
            []
        ]
    },
    {
        "id": "e5be3426.1368e8",
        "type": "subflow:851545fd.080be8",
        "z": "f4f34383.c51b7",
        "name": "",
        "x": 302.01422119140625,
        "y": 1476.3692626953125,
        "wires": []
    },
    {
        "id": "78bc6579.50d9ac",
        "type": "trigger-state",
        "z": "f4f34383.c51b7",
        "name": "Work",
        "server": "a0b35919.2f8bf8",
        "entityid": "zone.work",
        "debugenabled": false,
        "constraints": [],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 114.01420593261719,
        "y": 1590.3692407608032,
        "wires": [
            [
                "278d3b75.f6bc24",
                "4b73e80d.f8e3d8"
            ],
            []
        ]
    },
    {
        "id": "278d3b75.f6bc24",
        "type": "subflow:851545fd.080be8",
        "z": "f4f34383.c51b7",
        "name": "",
        "x": 307.01422119140625,
        "y": 1544.3692626953125,
        "wires": []
    },
    {
        "id": "6a5cde6b.7103",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "f4f34383.c51b7",
        "name": "",
        "x": 268.0094909667969,
        "y": 1434.551025390625,
        "wires": []
    },
    {
        "id": "4b73e80d.f8e3d8",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "f4f34383.c51b7",
        "name": "",
        "x": 304.00950622558594,
        "y": 1616.5509221553802,
        "wires": []
    },
    {
        "id": "81d32742.763018",
        "type": "comment",
        "z": "f4f34383.c51b7",
        "name": "Zones",
        "info": "",
        "x": 87.01420974731445,
        "y": 1379.46005320549,
        "wires": []
    },
    {
        "id": "1aa6a9e8.b0d866",
        "type": "api-call-service",
        "z": "375d1e4f.6a9d22",
        "name": "NAS on",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"switch.nas\" }",
        "mergecontext": "",
        "x": 749.9354934692383,
        "y": 386.4658269882202,
        "wires": [
            []
        ]
    },
    {
        "id": "7c6c9d38.16fbf4",
        "type": "api-call-service",
        "z": "375d1e4f.6a9d22",
        "name": "PC on",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"switch.pc\" }",
        "mergecontext": "",
        "x": 769.0094718933105,
        "y": 122.00566291809082,
        "wires": [
            []
        ]
    },
    {
        "id": "2f8e8038.8f7e8",
        "type": "api-call-service",
        "z": "375d1e4f.6a9d22",
        "name": "PC off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.pc\" }",
        "mergecontext": "",
        "x": 1061.0095901489258,
        "y": 192.00567197799683,
        "wires": [
            []
        ]
    },
    {
        "id": "ad2bdf7e.04602",
        "type": "api-call-service",
        "z": "f4f34383.c51b7",
        "name": "",
        "server": "a0b35919.2f8bf8",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"light.kantoor\",   \"rgb_color\": [100,255,100],   \"brightness_pct\":50 }",
        "mergecontext": "",
        "x": 381.7869110107422,
        "y": 461.57386016845703,
        "wires": [
            [
                "fb98dea0.9006f"
            ]
        ]
    },
    {
        "id": "e1362e85.cb05",
        "type": "api-call-service",
        "z": "f4f34383.c51b7",
        "name": "Neutral white",
        "server": "a0b35919.2f8bf8",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"light.kantoor\",   \"rgb_color\": [255,255,255],   \"brightness_pct\":25 }",
        "mergecontext": "",
        "x": 360.01422119140625,
        "y": 393.00567626953125,
        "wires": [
            []
        ]
    },
    {
        "id": "6e7bc3cb.04dd5c",
        "type": "inject",
        "z": "f4f34383.c51b7",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 124.01420593261719,
        "y": 387.00567626953125,
        "wires": [
            [
                "e1362e85.cb05"
            ]
        ]
    },
    {
        "id": "88567908.b67ef8",
        "type": "change",
        "z": "f4f34383.c51b7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 541.7840995788574,
        "y": 537.4913902282715,
        "wires": [
            []
        ]
    },
    {
        "id": "fb98dea0.9006f",
        "type": "debug",
        "z": "f4f34383.c51b7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 563.7812232971191,
        "y": 461.7527894973755,
        "wires": []
    },
    {
        "id": "3b9554d0.6e560c",
        "type": "change",
        "z": "f4f34383.c51b7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "brightness",
                "pt": "msg",
                "to": "100",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "color",
                "pt": "msg",
                "to": "",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 321.79261779785156,
        "y": 536.9431838989258,
        "wires": [
            [
                "88567908.b67ef8"
            ]
        ]
    },
    {
        "id": "a4c69374.a93d6",
        "type": "inject",
        "z": "f4f34383.c51b7",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 120.01420593261719,
        "y": 537.0056762695312,
        "wires": [
            [
                "3b9554d0.6e560c"
            ]
        ]
    },
    {
        "id": "47eea249.7d0f4c",
        "type": "server-state-changed",
        "z": "3aed527a.e169fe",
        "name": "",
        "server": "a0b35919.2f8bf8",
        "entityidfilter": "weather.dark_sky",
        "entityidfiltertype": "substring",
        "haltifstate": "",
        "x": 169.79261779785156,
        "y": 497.9744338989258,
        "wires": [
            [
                "6b731e8b.83811"
            ]
        ]
    },
    {
        "id": "e9d1690a.e19ff8",
        "type": "debug",
        "z": "c13cf3fe.71f31",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 1017.9317169189453,
        "y": 74.01136016845703,
        "wires": []
    },
    {
        "id": "e66a2806.7505f8",
        "type": "comment",
        "z": "aa9f90ed.25077",
        "name": "Badkamer",
        "info": "",
        "x": 80.93180847167969,
        "y": 62.37499475479126,
        "wires": []
    },
    {
        "id": "d28a852c.79a418",
        "type": "comment",
        "z": "aa9f90ed.25077",
        "name": "WC",
        "info": "",
        "x": 64.00948333740234,
        "y": 397.0057125091553,
        "wires": []
    },
    {
        "id": "c8711e2b.91fb2",
        "type": "comment",
        "z": "aa9f90ed.25077",
        "name": "Wasruimte",
        "info": "",
        "x": 77.00948333740234,
        "y": 258.55115699768066,
        "wires": []
    },
    {
        "id": "638ae36.6bd0c1c",
        "type": "trigger-state",
        "z": "aa9f90ed.25077",
        "name": "Wasruimte sensor",
        "server": "a0b35919.2f8bf8",
        "entityid": "binary_sensor.door_sensor_wasruimte",
        "debugenabled": false,
        "constraints": [
            {
                "id": "4ty3zy8fo1b",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 110.00947570800781,
        "y": 321.55115699768066,
        "wires": [
            [
                "5ca5d682.e95c8"
            ],
            [
                "5ca5d682.e95c8"
            ]
        ]
    },
    {
        "id": "7b582a51.8e9e74",
        "type": "api-call-service",
        "z": "375d1e4f.6a9d22",
        "name": "NAS off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.nas\" }",
        "mergecontext": "",
        "x": 750.0094318389893,
        "y": 438.0056438446045,
        "wires": [
            []
        ]
    },
    {
        "id": "c50dd262.902f6",
        "type": "debug",
        "z": "b01a2cb9.9baef",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 294.16668701171875,
        "y": 2761,
        "wires": []
    },
    {
        "id": "72808553.2f480c",
        "type": "subflow:fd7dbe32.1f2d2",
        "z": "aa9f90ed.25077",
        "name": "",
        "x": 536.2287693023682,
        "y": 320.48276710510254,
        "wires": []
    },
    {
        "id": "5ca5d682.e95c8",
        "type": "change",
        "z": "aa9f90ed.25077",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Wasruimte",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 347.01902770996094,
        "y": 319.03228759765625,
        "wires": [
            [
                "72808553.2f480c"
            ]
        ]
    },
    {
        "id": "2dcc3fb2.c3e27",
        "type": "trigger-state",
        "z": "922b9d9f.0323",
        "name": "Movement Keuken",
        "server": "a0b35919.2f8bf8",
        "entityid": "binary_sensor.pir_sensor_keuken",
        "debugenabled": false,
        "constraints": [
            {
                "id": "e83h6pue4l4",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 156,
        "y": 729,
        "wires": [
            [
                "cbc3c590.d1de18"
            ],
            []
        ]
    },
    {
        "id": "6f69cf67.550bc",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Barlicht on",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"switch.barlicht\" }",
        "mergecontext": "",
        "x": 558.1666793823242,
        "y": 730.0003852844238,
        "wires": [
            []
        ]
    },
    {
        "id": "71de6267.85898c",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Barlicht off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.barlicht\" }",
        "mergecontext": "",
        "x": 758.0001373291016,
        "y": 779.0000619888306,
        "wires": [
            []
        ]
    },
    {
        "id": "725376da.5755b8",
        "type": "trigger",
        "z": "922b9d9f.0323",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "10",
        "extend": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 561.1666793823242,
        "y": 783.3335576057434,
        "wires": [
            [
                "71de6267.85898c"
            ]
        ]
    },
    {
        "id": "cbc3c590.d1de18",
        "type": "api-current-state",
        "z": "922b9d9f.0323",
        "name": "If barlicht off",
        "server": "a0b35919.2f8bf8",
        "halt_if": "on",
        "override_topic": true,
        "override_payload": true,
        "entity_id": "switch.barlicht",
        "x": 357.1666946411133,
        "y": 728.0000629425049,
        "wires": [
            [
                "725376da.5755b8",
                "6f69cf67.550bc"
            ]
        ]
    },
    {
        "id": "f09ddb3f.750a98",
        "type": "comment",
        "z": "922b9d9f.0323",
        "name": "Movement Keuken",
        "info": "",
        "x": 100,
        "y": 678,
        "wires": []
    },
    {
        "id": "9f0dfc0d.a0248",
        "type": "trigger-state",
        "z": "f4f34383.c51b7",
        "name": "Stekker on",
        "server": "a0b35919.2f8bf8",
        "entityid": "switch.neo_coolcam_power_plug_12a_switch",
        "debugenabled": false,
        "constraints": [
            {
                "id": "h7lngjmcqsg",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 173,
        "y": 1726,
        "wires": [
            [
                "6a1a5962.da9138"
            ],
            []
        ]
    },
    {
        "id": "44359d30.1af444",
        "type": "api-call-service",
        "z": "f4f34383.c51b7",
        "name": "Stekker off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"switch.neo_coolcam_power_plug_12a_switch\" }",
        "mergecontext": "",
        "x": 531.9999732971191,
        "y": 1712,
        "wires": [
            []
        ]
    },
    {
        "id": "6a1a5962.da9138",
        "type": "trigger",
        "z": "f4f34383.c51b7",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "pay",
        "duration": "15",
        "extend": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 367.2476806640625,
        "y": 1712.6435179710388,
        "wires": [
            [
                "44359d30.1af444"
            ]
        ]
    },
    {
        "id": "8917094e.e89d08",
        "type": "comment",
        "z": "f4f34383.c51b7",
        "name": "Stekker",
        "info": "",
        "x": 59.00948715209961,
        "y": 1664.0056762695312,
        "wires": []
    },
    {
        "id": "d2ab1840.0b4938",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Keuken Berging off",
        "server": "a0b35919.2f8bf8",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{   \"entity_id\": \"light.keukenberging\" }",
        "mergecontext": "",
        "x": 436.0000114440918,
        "y": 1003,
        "wires": [
            []
        ]
    },
    {
        "id": "257a9ea5.fe6652",
        "type": "trigger-state",
        "z": "922b9d9f.0323",
        "name": "Berging Keuken",
        "server": "a0b35919.2f8bf8",
        "entityid": "binary_sensor.door_bergingkeuken_sensor",
        "debugenabled": false,
        "constraints": [
            {
                "id": "4ty3zy8fo1b",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "constraintsmustmatch": "all",
        "outputs": 2,
        "customoutputs": [],
        "x": 134.78974533081055,
        "y": 925.5823936462402,
        "wires": [
            [
                "e288ba2a.d005e8",
                "e3703808.9292a8"
            ],
            [
                "d2ab1840.0b4938",
                "e3703808.9292a8"
            ]
        ]
    },
    {
        "id": "e288ba2a.d005e8",
        "type": "api-call-service",
        "z": "922b9d9f.0323",
        "name": "Keuken Berging On",
        "server": "a0b35919.2f8bf8",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{   \"entity_id\": \"light.keukenberging\",    \"color_name\":\"white\",    \"brightness\": 255 }",
        "mergecontext": "",
        "x": 436.0142593383789,
        "y": 886.005765914917,
        "wires": [
            []
        ]
    },
    {
        "id": "964b34a3.dc9c98",
        "type": "comment",
        "z": "922b9d9f.0323",
        "name": "Berging",
        "info": "",
        "x": 74,
        "y": 879.0001058578491,
        "wires": []
    },
    {
        "id": "78c31340.7d3d3c",
        "type": "inject",
        "z": "f4f34383.c51b7",
        "name": "",
        "topic": "",
        "payload": "500",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 78,
        "y": 119,
        "wires": [
            [
                "2317fed8.be2a22"
            ]
        ]
    },
    {
        "id": "79606aa.cbe0094",
        "type": "csv",
        "z": "f4f34383.c51b7",
        "name": "Tabel",
        "sep": ",",
        "hdrin": true,
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "Power,R,G,B,Brightness",
        "skip": "0",
        "x": 544.5,
        "y": 118,
        "wires": [
            [
                "88c0e6ab.1749a8"
            ]
        ]
    },
    {
        "id": "7b62a5d3.4971dc",
        "type": "debug",
        "z": "f4f34383.c51b7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 800,
        "y": 44,
        "wires": []
    },
    {
        "id": "6a5f2f81.2c167",
        "type": "file in",
        "z": "f4f34383.c51b7",
        "name": "LoadFile",
        "filename": "c:\\Rgbkleurenrange.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": true,
        "x": 392.5,
        "y": 122,
        "wires": [
            [
                "79606aa.cbe0094"
            ]
        ]
    },
    {
        "id": "88c0e6ab.1749a8",
        "type": "function",
        "z": "f4f34383.c51b7",
        "name": "Select based on payload value",
        "func": "msg.payload.forEach(function(row) {\n    // node.warn(row);\n    // node.warn(row.Power);\n    // node.warn(msg.data)\n    if(msg.data>row.Power){\n        // node.warn(\"ddd\");\n        msg.payload = row;\n    }\n});\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 762,
        "y": 118,
        "wires": [
            [
                "7b62a5d3.4971dc"
            ]
        ]
    },
    {
        "id": "2317fed8.be2a22",
        "type": "change",
        "z": "f4f34383.c51b7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "data",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 231,
        "y": 123,
        "wires": [
            [
                "6a5f2f81.2c167"
            ]
        ]
    },
    {
        "id": "e3703808.9292a8",
        "type": "debug",
        "z": "922b9d9f.0323",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 306.166690826416,
        "y": 824.0000238418579,
        "wires": []
    },
    {
        "id": "4de2fa66.98f9d4",
        "type": "inject",
        "z": "922b9d9f.0323",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 185.16668701171875,
        "y": 1067,
        "wires": [
            [
                "e288ba2a.d005e8"
            ]
        ]
    },
    {
        "id": "1bbe928d.7925cd",
        "type": "debug",
        "z": "922b9d9f.0323",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 330.0000057220459,
        "y": 1143.000033378601,
        "wires": []
    },
    {
        "id": "984b95a5.1f82b8",
        "type": "server-events",
        "z": "922b9d9f.0323",
        "name": "",
        "server": "a0b35919.2f8bf8",
        "x": 105.16667175292969,
        "y": 1190,
        "wires": [
            [
                "1bbe928d.7925cd"
            ]
        ]
    }
]